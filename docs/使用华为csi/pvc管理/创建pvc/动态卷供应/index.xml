<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>动态卷供应 on Huawei</title>
    <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/</link>
    <description>Recent content in 动态卷供应 on Huawei</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <atom:link href="/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>动态卷供应典型场景StorageClass配置示例</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94%E5%85%B8%E5%9E%8B%E5%9C%BA%E6%99%AFstorageclass%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94%E5%85%B8%E5%9E%8B%E5%9C%BA%E6%99%AFstorageclass%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B/</guid>
      <description>存储类（StorageClass）为管理员提供了描述存储 &amp;ldquo;类&amp;rdquo; 的方法。 不同的类型可能会映射到一组不同的能力定义。Kubernetes集群用户可基于StorageClass进行动态卷制备。&#xA;使用SAN存储时可参考示例文件/examples/sc-lun.yaml，使用NAS存储时可参考示例文件/examples/sc-fs.yaml。&#xA;典型场景下StorageClass配置请参考如下示例：&#xA;StorageClass中设置后端和存储池 StorageClass中设置NFS访问方式 StorageClass中设置Dtree类型 StorageClass中设置本地文件系统访问方式 StorageClass中设置DPC访问方式 StorageClass中设置应用类型 StorageClass中设置软配额 StorageClass中设置双活 StorageClass中设置挂载目录权限 StorageClass中设置QoS CCE / CCE Agile平台中配置StorageClass StorageClass中设置后端和存储池 如果在一个Kubernetes集群中配置了多个华为后端，或者一个华为后端提供多个存储池，建议在StorageClass中配置指定的后端和存储池信息，避免华为CSI随机选择后端和存储池，导致卷所在的存储不符合规划。&#xA;SAN存储设置后端和存储池可以参考如下配置示例。&#xA;kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: mysc provisioner: csi.huawei.com allowVolumeExpansion: true parameters: backend: &amp;#34;san-181&amp;#34; # 存储后端名称 pool: &amp;#34;pool001&amp;#34; # 存储池名称 volumeType: lun allocType: thin NAS存储设置后端和存储池可以参考如下配置示例。&#xA;kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: mysc provisioner: csi.huawei.com allowVolumeExpansion: true parameters: backend: &amp;#34;san-181&amp;#34; # 存储后端名称 pool: &amp;#34;pool001&amp;#34; # 存储池名称 volumeType: fs allocType: thin authClient: &amp;#34;*&amp;#34; StorageClass中设置NFS访问方式 容器使用NFS文件系统作为存储资源时，可以参考如下配置示例。该示例中，NFS挂载时指定版本为4.</description>
    </item>
    <item>
      <title>动态卷供应StorageClass参数说明</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94storageclass%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94storageclass%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</guid>
      <description>表 1 StorageClass配置参数说明&#xA;参数&#xA;说明&#xA;必选参数&#xA;默认值&#xA;备注&#xA;metadata.name&#xA;自定义的StorageClass对象名称。&#xA;是&#xA;-&#xA;以Kubernetes v1.22.1为例，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以字母数字开头和结尾。&#xA;provisioner&#xA;制备器名称。&#xA;是&#xA;csi.huawei.com&#xA;该字段需要指定为安装华为CSI时设置的驱动名称。&#xA;取值和values.yaml文件中driverName一致。&#xA;reclaimPolicy&#xA;回收策略。支持如下类型：&#xA;Delete：自动回收资源。Retain：手动回收资源。 否&#xA;Delete&#xA;Delete：删除PV/PVC时会关联删除存储上的资源。Retain：删除PV/PVC时不会删除存储上的资源。 allowVolumeExpansion&#xA;是否允许卷扩展。参数设置为true 时，使用该StorageClass的PV可以进行扩容操作。&#xA;否&#xA;false&#xA;此功能仅可用于扩容PV，不能用于缩容PV。&#xA;扩容PV功能在Kubernetes 1.14 (alpha)后才支持。&#xA;parameters.backend&#xA;待创建资源所在的后端名称。&#xA;否&#xA;-&#xA;如果不设置，华为CSI随机选择一个满足容量要求的后端创建资源。&#xA;建议指定后端，确保创建的资源在预期的后端上。&#xA;parameters.pool&#xA;待创建资源所在的存储资源池名称。如果设置，则必须设置parameters.backend。&#xA;否&#xA;-&#xA;如果不设置，华为CSI会在所选后端上随机选择一个满足容量要求的存储池创建资源。建议指定存储池，确保创建的资源在预期的存储池上。&#xA;parameters.volumeType&#xA;待创建卷类型。支持如下类型：&#xA;lun：存储侧发放的资源是LUN。fs：存储侧发放的资源是文件系统。dtree：存储侧发放的资源是Dtree类型的卷 是&#xA;-&#xA;使用NAS存储时，必须配置为fs。使用SAN存储时，必须配置为lun。使用Dtree类型的NAS存储时，必须配置为dtree parameters.allocType&#xA;待创建卷的分配类型。支持如下类型：&#xA;thin：创建时不会分配所有需要的空间，而是根据使用情况动态分配。thick：创建时分配所有需要的空间。 否&#xA;-&#xA;传空相当于传thin，创建时不会分配所有需要的空间，而是根据使用情况动态分配。&#xA;OceanStor Dorado/OceanStor Dorado V3 不支持thick&#xA;parameters.fsType&#xA;主机文件系统类型。支持类型为：&#xA;ext2ext3ext4xfs 否&#xA;ext4&#xA;仅当StorageClass的volumeType设置为“lun”，且PVC的volumeMode配置为“Filesystem”时生效。&#xA;parameters.authClient</description>
    </item>
    <item>
      <title>动态卷供应PVC参数说明</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94pvc%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94pvc%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</guid>
      <description>在完成配置StorageClass以后，就可以用该StorageClass来配置PVC。PVC的配置模板请参考华为CSI软件包中的examples目录下的pvc*.yaml文件示例。&#xA;表 1 pvc*.yaml文件示例参数说明&#xA;参数&#xA;说明&#xA;必选参数&#xA;默认值&#xA;备注&#xA;metadata.name&#xA;自定义的PVC对象名称。&#xA;是&#xA;-&#xA;以Kubernetes v1.22.1为例，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以字母数字开头和结尾。&#xA;spec.volumeMode&#xA;卷模式。可选参数。 当使用LUN类型的卷时，支持配置以下类型：&#xA;Filesystem：本地文件系统。Block：裸设备。 否&#xA;Filesystem&#xA;该参数在挂载PV时生效，默认为Filesystem。&#xA;Filesystem表示在容器通过一个本地文件系统访问PV，本地文件系统类型为指定StorageClass中的fsType字段指定, Dtree类型存储也使用此参数进行描述。Block表示使用裸卷的方式访问访问PV。 spec.storageClassName&#xA;StorageClass对象名称。&#xA;是&#xA;-&#xA;业务需要的StorageClass对象名称。&#xA;spec.resources.requests.storage&#xA;指定待创建卷大小，格式为***Gi，单位为GiB。需要满足大小为512字节的整数倍。&#xA;是&#xA;10Gi&#xA;PVC容量的规格取决于存储规格限制和主机规格限制。以OceanStor Dorado 6.1.2/OceanStor Pacific系列 8.1.0对接CentOS 7为例，当使用的是ext4文件系统时，容量限制见表 ext4容量的规格；当使用的是XFS文件系统时，容量限制见表 XFS容量的规格。如果使用的是NFS或者裸设备，容量需满足使用的华为存储设备型号和版本所要求的规格约束。&#xA;如果PVC容量不在规格范围内，可能会由于存储规格限制或主机文件系统规格限制导致创建PVC或Pod失败。&#xA;spec.accessModes&#xA;指定卷访问模式。&#xA;RWO（ReadWriteOnce）：卷可以被一个节点以读写方式挂载。 该模式也允许运行在同一节点上的多个 Pod 访问卷。ROX（ReadOnlyMany）：卷可以被多个节点以只读方式挂载。RWX（ReadWriteMany）：卷可以被多个节点以读写方式挂载。RWOP（ReadWriteOncePod）：卷只能被单个 Pod 以读写方式挂载。该特性需要 Kubernetes 1.22 以上版本。 是&#xA;ReadWriteOnce&#xA;RWO/ROX/RWOP：所有类型卷均支持，RWOP需Kubernetes 1.22版本以上支持。请参考开启ReadWriteOncePod功能门章节，检查您的Kubernetes集群是否开启该特性。RWX支持情况如下：NAS存储：所有卷均支持。SAN存储：仅volumeMode设置为Block的卷支持。 表 2 ext4容量的规格&#xA;存储类型&#xA;存储规格限制&#xA;ext4规格限制&#xA;CSI规格限制&#xA;OceanStor Dorado 6.1.2&#xA;512Ki~256Ti&#xA;50Ti&#xA;512Ki~50Ti</description>
    </item>
  </channel>
</rss>
