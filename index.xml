<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>华为容器存储套件 on Huawei</title>
    <link>/</link>
    <description>Recent content in 华为容器存储套件 on Huawei</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <atom:link href="/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Kubernetes、OpenShift、Tanzu安装华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/kubernetes-openshift-tanzu%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/kubernetes-openshift-tanzu%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/</guid>
      <description>安装步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录集群的任意master节点。&#xA;将Kubernetes CSI组件包中的&amp;quot;helm&amp;quot;目录拷贝到master节点的任意目录下。Helm工具路径请参见表 软件包组件描述。&#xA;进入到helm/esdk的工作目录下。&#xA;cd helm/esdk 准备values.yaml文件，华为CSI已经在软件包的helm/esdk目录下提供了values.yaml模板文件，您也可以根据Helm values.yaml参数说明修改参数对华为CSI进行定制。&#xA;安装前配置：&#xA;若容器平台为Kubernetes，可跳过该步骤。 若容器平台为Openshift，请根据OpenShift平台安装配置进行配置。 若容器平台为Tanzu，请根据Tanzu平台安装配置进行配置。 执行命令，更新存储后端CRD&#xA;kubectl apply -f ./crds/backend/ （可选） 请务必按照检查卷快照依赖组件章节检查快照依赖组件，确认无误后执行执行命令更新快照CRD，如果controller.snapshot.enabled参数设置为false或Kubernetes版本低于v1.17，可跳过本步骤，详情请参考表 controller配置项说明。&#xA;kubectl apply -f ./crds/snapshot-crds/ --validate=false 执行如下命令安装华为CSI。其中，helm-huawei-csi为自定义的Helm Chart名称，./表示使用当前目录下的Helm工程，huawei-csi为自定义的Helm Chart命名空间。&#xA;helm install helm-huawei-csi ./ -n huawei-csi --create-namespace 命令执行结果如下：&#xA;NAME: helm-huawei-csi LAST DEPLOYED: Wed Jun 8 11:50:28 2022 NAMESPACE: huawei-csi STATUS: deployed REVISION: 1 TEST SUITE: None 完成huawei-csi服务部署后，可执行如下命令检查服务是否启动：&#xA;kubectl get pod -n huawei-csi 命令结果示例如下，Pod状态为“Running“则安装成功。&#xA;NAME READY STATUS RESTARTS AGE huawei-csi-controller-6dfcc4b79f-9vjtq 9/9 Running 0 24m huawei-csi-controller-6dfcc4b79f-csphc 9/9 Running 0 24m huawei-csi-node-g6f4k 3/3 Running 0 20m huawei-csi-node-tqs87 3/3 Running 0 20m OpenShift平台安装配置 OpenShift平台请根据以下命令创建SecurityContextConstraints资源。</description>
    </item>
    <item>
      <title>Kubernetes、OpenShift、Tanzu回退华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/kubernetes-openshift-tanzu%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/kubernetes-openshift-tanzu%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/</guid>
      <description>前提条件 已使用Helm 3完成CSI的更新。 操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;进入到helm/esdk的工作目录下，目录路径请参见表 软件包组件描述。&#xA;cd helm/esdk 执行命令，查看Helm部署CSI服务的历史版本。&#xA;helm history helm-huawei-csi -n huawei-csi 命令结果示例如下。&#xA;REVISION UPDATED STATUS CHART APP VERSION DESCRIPTION 1 Mon Jan 8 04:15:40 2024&#x9;superseded&#x9;esdk-4.4.0&#x9;4.4.0 Install complete 2 Mon Jan 8 04:16:12 2024&#x9;deployed esdk-4.5.0&#x9;4.5.0 Upgrade complete 执行命令，回退CSI服务到指定版本。&#xA;其中，revision-number为3查询到的版本号。例如版本为：1。&#xA;helm rollback helm-huawei-csi -n huawei-csi 1 命令结果示例如下，回显中有Rollback was a success，则表示回退CSI服务到指定版本成功。&#xA;Rollback was a success! Happy Helming! </description>
    </item>
    <item>
      <title>Kubernetes、OpenShift、Tanzu卸载华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/helm%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/kubernetes-openshift-tanzu%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/helm%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/kubernetes-openshift-tanzu%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/</guid>
      <description>本章节介绍如何在Kubernetes、OpenShift、Tanzu平台卸载华为CSI。&#xA;操作步骤 卸载huawei-csi-host-info对象使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令卸载华为CSI，helm-huawei-csi 是自定义的Helm Chart名称，huawei-csi 是该Helm Chart所在的命名空间。该卸载命令将会卸载华为CSI的huawei-csi-controller、huawei-csi-node和RBAC资源。&#xA;helm uninstall helm-huawei-csi -n huawei-csi 卸载命令执行后，还需要检查卸载是否成功。其中，huawei-csi 为chart所在的命名空间。&#xA;helm list -n huawei-csi 命令结果示例如下，如果回显为空，则表示服务卸载成功。&#xA;NAME NAMESPACE REVISION UPDATED STATUS CHART APP VERSION 卸载huawei-csi-host-info对象，请参考卸载huawei-csi-host-info对象进行操作。&#xA;卸载webhook资源，请参考卸载Webhook资源进行操作。&#xA;（可选）卸载快照依赖组件服务，请参考卸载Snapshot依赖组件服务进行操作。&#xA;（可选）卸载Lease资源，请参考卸载Lease资源进行操作。</description>
    </item>
    <item>
      <title>Kubernetes及操作系统兼容性</title>
      <link>/docs/%E5%85%BC%E5%AE%B9%E6%80%A7%E5%92%8C%E7%89%B9%E6%80%A7/kubernetes%E5%8F%8A%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%85%BC%E5%AE%B9%E6%80%A7/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%85%BC%E5%AE%B9%E6%80%A7%E5%92%8C%E7%89%B9%E6%80%A7/kubernetes%E5%8F%8A%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%85%BC%E5%AE%B9%E6%80%A7/</guid>
      <description>华为CSI插件支持如下容器管理平台：&#xA;表 1 支持的容器管理平台&#xA;容器管理平台&#xA;版本&#xA;Kubernetes&#xA;1.16~1.30&#xA;Red Hat OpenShift Container Platform&#xA;4.6 EUS, 4.7, 4.8, 4.9, 4.10, 4.11, 4.12, 4.13, 4.14, 4.15&#xA;Tanzu Kubernetes&#xA;TKGI 1.14.1, TKGI 1.15, TKGI 1.16, TKGI 1.17, TKGI 1.18&#xA;CCE Agile&#xA;22.3.2&#xA;CCE&#xA;22.9.5&#xA;华为CSI对接Tanzu Kubernetes仅支持集中式存储NAS场景，相关FAQ请参见对接Tanzu Kubernetes集群常见问题及解决方法。 华为CSI对接CCE/CCE Agile仅支持集中式存储。 华为CSI插件支持的操作系统以及多路径信息如下表所示。&#xA;表 2 支持的主机操作系统及多路径软件版本&#xA;操作系统名称&#xA;操作系统版本&#xA;原生DM-Multipath版本&#xA;华为UltraPath版本&#xA;CentOS x86_64&#xA;7.6, 7.7, 7.9&#xA;随OS自带，支持FC/iSCSI&#xA;UltraPath 31.1.0，支持FC/iSCSI&#xA;CentOS x86_64&#xA;8.2, 8.4&#xA;随OS自带，支持FC/iSCSI&#xA;UltraPath 31.1.0，支持FC/iSCSI&#xA;UltraPath-NVMe 31.</description>
    </item>
    <item>
      <title>oceanctl更新存储后端密码</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E6%9B%B4%E6%96%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/oceanctl%E6%9B%B4%E6%96%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E5%AF%86%E7%A0%81/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E6%9B%B4%E6%96%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/oceanctl%E6%9B%B4%E6%96%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E5%AF%86%E7%A0%81/</guid>
      <description>更新后端示例 执行以下命令获取更新存储后端帮助。&#xA;oceanctl update backend -h 命令结果如下：&#xA;Update a backend for Ocean Storage in Kubernetes Usage: oceanctl update backend &amp;lt;name&amp;gt; [flags] Examples: # Update backend account information in default(huawei-csi) namespace oceanctl update backend &amp;lt;name&amp;gt; --password # Update backend account information in specified namespace oceanctl update backend &amp;lt;name&amp;gt; -n namespace --password Flags: -h, --help help for backend -n, --namespace string namespace of resources --password Update account password 执行以下命令更新存储后端信息。&#xA;oceanctl update backend backend-1 --password 根据提示输入新的用户名和密码：</description>
    </item>
    <item>
      <title>OceanStor V5系列和OceanStor Dorado V3系列ALUA特性配置策略样例</title>
      <link>/docs/%E9%99%84%E5%BD%95/oceanstor-v5%E7%B3%BB%E5%88%97%E5%92%8Coceanstor-dorado-v3%E7%B3%BB%E5%88%97alua%E7%89%B9%E6%80%A7%E9%85%8D%E7%BD%AE%E7%AD%96%E7%95%A5%E6%A0%B7%E4%BE%8B/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%99%84%E5%BD%95/oceanstor-v5%E7%B3%BB%E5%88%97%E5%92%8Coceanstor-dorado-v3%E7%B3%BB%E5%88%97alua%E7%89%B9%E6%80%A7%E9%85%8D%E7%BD%AE%E7%AD%96%E7%95%A5%E6%A0%B7%E4%BE%8B/</guid>
      <description>例1.配置文件如下：&#xA;parameters: ALUA: &amp;#34;*&amp;#34;: MULTIPATHTYPE: 1 FAILOVERMODE: 3 SPECIALMODETYPE: 0 PATHTYPE: 0 node1: MULTIPATHTYPE: 1 FAILOVERMODE: 3 SPECIALMODETYPE: 0 PATHTYPE: 1 对于主机名为“node1”，上述ALUA配置段都能用于配置启动器。根据配置华为企业存储后端的ALUA参数中的配置策略规则，优先级顺序为第2条配置段（HostName为&amp;quot;node1&amp;quot;）高于第1条配置段（HostName为&amp;quot;*&amp;quot;）。&#xA;例2.配置文件如下：&#xA;parameters: ALUA: node[0-9]: MULTIPATHTYPE: 1 FAILOVERMODE: 3 SPECIALMODETYPE: 0 PATHTYPE: 0 node[5-7]: MULTIPATHTYPE: 1 FAILOVERMODE: 3 SPECIALMODETYPE: 0 PATHTYPE: 1 对于主机名为“node6”的主机，上述ALUA配置段都能用于配置启动器。根据配置华为企业存储后端的ALUA参数中的配置策略规则，选择第一条ALUA配置段来配置启动器。&#xA;例3.配置文件如下：&#xA;parameters: ALUA: node$: MULTIPATHTYPE: 1 FAILOVERMODE: 3 SPECIALMODETYPE: 0 PATHTYPE: 0 node10$: MULTIPATHTYPE: 1 FAILOVERMODE: 3 SPECIALMODETYPE: 0 PATHTYPE: 1 根据配置华为企业存储后端的ALUA参数中的配置策略规则，对于主机名为“node1”的主机，选择第一条ALUA配置段来配置启动器；对于主机名为“node10”的主机，选择第二条ALUA配置段来配置启动器。^表示匹配字符串的开头，$表示匹配字符串的结尾。</description>
    </item>
    <item>
      <title>安装Helm 3</title>
      <link>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E5%AE%89%E8%A3%85helm-3/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E5%AE%89%E8%A3%85helm-3/</guid>
      <description>本章节指导用户如何安装Helm 3。&#xA;参考：https://helm.sh/docs/intro/install/&#xA;前提条件 确保Kubernetes集群中的master节点可以访问Internet。&#xA;操作步骤 执行以下命令，下载Helm 3的安装脚本。&#xA;curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 执行以下命令，修改Helm 3的安装脚本权限。&#xA;chmod 700 get_helm.sh 根据Helm与Kubernetes版本配套关系确认需要安装的Helm版本，配套关系请参考Helm Version Support Policy，执行以下命令，修改DESIRED_VERSION环境变量为需要安装的Helm版本，并执行安装命令。&#xA;DESIRED_VERSION=v3.9.0 ./get_helm.sh 执行以下命令，查看指定版本的Helm 3是否安装成功。&#xA;helm version 命令结果示例如下，说明安装成功。&#xA;version.BuildInfo{Version:&amp;#34;v3.9.0&amp;#34;, GitCommit:&amp;#34;7ceeda6c585217a19a1131663d8cd1f7d641b2a7&amp;#34;, GitTreeState:&amp;#34;clean&amp;#34;, GoVersion:&amp;#34;go1.17.5&amp;#34;} </description>
    </item>
    <item>
      <title>创建PVC时， PVC的状态为Pending</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pvc%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApvc%E6%97%B6-pvc%E7%9A%84%E7%8A%B6%E6%80%81%E4%B8%BApending/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pvc%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApvc%E6%97%B6-pvc%E7%9A%84%E7%8A%B6%E6%80%81%E4%B8%BApending/</guid>
      <description>现象描述 执行完成PVC的创建操作，一段时间后，PVC的状态仍然处于Pending。&#xA;根因分析 原因1：由于没有提前创建指定名称的StorageClass，导致Kubernetes在创建PVC时无法找到指定StorageClass名称。&#xA;原因2：由于存储池能力和StorageClass能力不匹配，导致huawei-csi选择存储池失败。&#xA;原因3：由于存储RESTful接口执行返回具体错误码（例如：50331651），导致huawei-csi在执行创建PVC时失败。&#xA;原因4：由于存储在huawei-csi设定的超时时间内没有返回，huawei-csi向Kubernetes返回超时错误。&#xA;原因5：其他原因。&#xA;解决措施或规避方法 创建PVC时，如果PVC处于Pending状态，需要根据以下不同的原因采取不同的解决措施。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，查看PVC的详细信息。&#xA;kubectl describe pvc mypvc 根据PVC详细信息中Events信息，执行相应操作。&#xA;如果由原因1导致PVC处于Pending状态，执行以下步骤。&#xA;Events: Type Reason Age From Message ---- ------ ---- ---- ------- Warning ProvisioningFailed 0s (x15 over 3m24s) persistentvolume-controller storageclass.storage.k8s.io &amp;#34;mysc&amp;#34; not found 删除PVC。 创建StorageClass，可参考动态卷供应典型场景StorageClass配置示例。 创建新的PVC，可参考动态卷供应PVC参数说明。 如果由原因2导致PVC处于Pending状态，执行以下步骤。&#xA;Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal Provisioning 63s (x3 over 64s) csi.huawei.com_huawei-csi-controller-b59577886-qqzm8_58533e4a-884c-4c7f-92c3-6e8a7b327515 External provisioner is provisioning volume for claim &amp;#34;default/mypvc&amp;#34; Warning ProvisioningFailed 63s (x3 over 64s) csi.</description>
    </item>
    <item>
      <title>创建证书到存储后端</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E6%96%B0%E5%A2%9E%E8%AF%81%E4%B9%A6%E5%88%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E5%8F%AF%E9%80%89/%E5%88%9B%E5%BB%BA%E8%AF%81%E4%B9%A6%E5%88%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E6%96%B0%E5%A2%9E%E8%AF%81%E4%B9%A6%E5%88%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E5%8F%AF%E9%80%89/%E5%88%9B%E5%BB%BA%E8%AF%81%E4%B9%A6%E5%88%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/</guid>
      <description>前提条件 完成证书制作。以OceanStor Dorado为例，证书制作过程请参考：点此前往。&#xA;创建证书示例 提前准备好证书文件，如cert.crt。&#xA;执行以下命令获取存储后端。&#xA;oceanctl get backend 命令结果示例如下。&#xA;NAMESPACE NAME PROTOCOL STORAGETYPE SN STATUS ONLINE URL huawei-csi backend-1 roce oceanstor-san xxxxxxxxxxxxxxxxxxxx Bound true https://192.168.129.157:8088 huawei-csi backend-2 roce oceanstor-san xxxxxxxxxxxxxxxxxxxx Bound true https://192.168.129.158:8088 执行以下命令为指定存储后端创建证书。&#xA;oceanctl create cert cert-1 -b backend-1 -f /path/to/cert.crt 检查证书创建结果。&#xA;oceanctl get cert -b backend-1 命令结果示例如下。&#xA;NAMESPACE NAME BOUNDBACKEND huawei-csi cert-1 backend-1 </description>
    </item>
    <item>
      <title>从2.x或3.x升级至4.x版本</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi/%E4%BB%8E2-x%E6%88%963-x%E5%8D%87%E7%BA%A7%E8%87%B34-x%E7%89%88%E6%9C%AC/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi/%E4%BB%8E2-x%E6%88%963-x%E5%8D%87%E7%BA%A7%E8%87%B34-x%E7%89%88%E6%9C%AC/</guid>
      <description>在CSI 2.x或3.x 版本中，使用块存储时，与存储建立映射的操作是在huawei-csi-node服务进行的，所以huawei-csi-node服务需要和存储管理网络通信。又由于huawei-csi-node服务是以DaemonSet部署的，在集群中每个节点都会部署一个huawei-csi-node服务，这样部署模型导致了在大规模集群下，每个huawei-csi-node服务都会向存储发起请求，可能导致存储连接数被占满，使得huawei-csi-node不能提供正常服务。 在CSI 4.x版本优化了该部署模型，将与存储建立映射操作迁移至huawei-csi-controller服务，huawei-csi-node服务不再需要和存储管理网络通信，降低了华为CSI依赖的组网复杂度，同时huawei-csi-controller服务以Deployment形式部署，副本数根据客户可靠性要求设置，一般情况下，副本数为1~3。所以极大的减少了华为CSI与存储的连接数量，使得华为CSI服务能够接入大规模集群。 该架构变化可能会导致一个问题：升级后，使用2.x或3.x发放的工作负载，升级CSI至4.x版本之后，如果产生了一次新的挂载流程，并且CO（Container Orchestration system）未调用华为CSI提供的huawei-csi-controller服务，会导致挂载失败。问题请参考创建Pod失败，Events日志显示“publishInfo doesn&amp;rsquo;t exist”。&#xA;备份存储后端配置 如果您已按照以上须知评估风险后，确认需要从2.x或3.x版本的CSI升级至4.5.0版本，请按照以下操作步骤备份存储后端配置：&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令备份后端信息到configmap.json文件中。OpenShift平台使用oc替换kubectl命令。&#xA;kubectl get cm huawei-csi-configmap -n huawei-csi -o json &amp;gt; configmap.json 升级华为CSI 请按照升级华为CSI中的步骤进行升级。&#xA;配置存储后端 请将备份存储后端配置中备份的后端信息，按照管理存储后端章节的说明配置存储后端，存储后端配置成功后，请务必按照以上须知所述的风险处理方法进行操作，避免Pod在漂移过程中出现问题。</description>
    </item>
    <item>
      <title>典型场景存储后端配置文件示例</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E5%85%B8%E5%9E%8B%E5%9C%BA%E6%99%AF%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%A4%BA%E4%BE%8B/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E5%85%B8%E5%9E%8B%E5%9C%BA%E6%99%AF%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%A4%BA%E4%BE%8B/</guid>
      <description>典型场景的backend配置请参考下列示例，详细的参数配置请参考存储后端配置项说明。&#xA;配置iSCSI协议类型的存储后端 配置FC协议类型的存储后端 配置NVMe over RoCE协议类型的存储后端 配置NVMe over FC协议类型的存储后端 配置NFS协议类型的存储后端 配置SCSI协议类型的存储后端 配置DPC协议类型的存储后端 配置Dtree类型的存储后端 配置双活类型的存储后端 配置iSCSI协议类型的存储后端 如果要使用iSCSI协议类型，请确保在安装华为CSI前，主机上已安装iSCSI客户端，可通过检查主机依赖软件状态章节检查。如未安装iSCSI客户端，请在安装iSCSI客户端之后重启huawei-csi-node服务，重启期间，不能使用华为CSI创建新的资源，或者对已有的PVC做挂载/卸载操作。参考命令如下：&#xA;kubectl delete pods -n huawei-csi -l app=huawei-csi-node 企业存储配置iSCSI协议类型的后端配置文件示例如下：&#xA;storage: &amp;#34;oceanstor-san&amp;#34; name: &amp;#34;dorado-iscsi-155&amp;#34; namespace: &amp;#34;huawei-csi&amp;#34; urls: - &amp;#34;https://192.168.129.155:8088&amp;#34; - &amp;#34;https://192.168.129.156:8088&amp;#34; pools: - &amp;#34;StoragePool001&amp;#34; parameters: protocol: &amp;#34;iscsi&amp;#34; portals: - &amp;#34;192.168.128.120&amp;#34; - &amp;#34;192.168.128.121&amp;#34; maxClientThreads: &amp;#34;30&amp;#34; 分布式存储配置iSCSI协议类型的后端配置文件示例如下：&#xA;storage: &amp;#34;fusionstorage-san&amp;#34; name: &amp;#34;pacific-iscsi-125&amp;#34; namespace: &amp;#34;huawei-csi&amp;#34; urls: - &amp;#34;https://192.168.129.125:8088&amp;#34; - &amp;#34;https://192.168.129.126:8088&amp;#34; pools: - &amp;#34;StoragePool001&amp;#34; parameters: protocol: &amp;#34;iscsi&amp;#34; portals: - &amp;#34;192.168.128.122&amp;#34; - &amp;#34;192.</description>
    </item>
    <item>
      <title>动态卷供应典型场景StorageClass配置示例</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94%E5%85%B8%E5%9E%8B%E5%9C%BA%E6%99%AFstorageclass%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94%E5%85%B8%E5%9E%8B%E5%9C%BA%E6%99%AFstorageclass%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B/</guid>
      <description>存储类（StorageClass）为管理员提供了描述存储 &amp;ldquo;类&amp;rdquo; 的方法。 不同的类型可能会映射到一组不同的能力定义。Kubernetes集群用户可基于StorageClass进行动态卷制备。&#xA;使用SAN存储时可参考示例文件/examples/sc-lun.yaml，使用NAS存储时可参考示例文件/examples/sc-fs.yaml。&#xA;典型场景下StorageClass配置请参考如下示例：&#xA;StorageClass中设置后端和存储池 StorageClass中设置NFS访问方式 StorageClass中设置Dtree类型 StorageClass中设置本地文件系统访问方式 StorageClass中设置DPC访问方式 StorageClass中设置应用类型 StorageClass中设置软配额 StorageClass中设置双活 StorageClass中设置挂载目录权限 StorageClass中设置QoS CCE / CCE Agile平台中配置StorageClass StorageClass中设置后端和存储池 如果在一个Kubernetes集群中配置了多个华为后端，或者一个华为后端提供多个存储池，建议在StorageClass中配置指定的后端和存储池信息，避免华为CSI随机选择后端和存储池，导致卷所在的存储不符合规划。&#xA;SAN存储设置后端和存储池可以参考如下配置示例。&#xA;kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: mysc provisioner: csi.huawei.com allowVolumeExpansion: true parameters: backend: &amp;#34;san-181&amp;#34; # 存储后端名称 pool: &amp;#34;pool001&amp;#34; # 存储池名称 volumeType: lun allocType: thin NAS存储设置后端和存储池可以参考如下配置示例。&#xA;kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: mysc provisioner: csi.huawei.com allowVolumeExpansion: true parameters: backend: &amp;#34;san-181&amp;#34; # 存储后端名称 pool: &amp;#34;pool001&amp;#34; # 存储池名称 volumeType: fs allocType: thin authClient: &amp;#34;*&amp;#34; StorageClass中设置NFS访问方式 容器使用NFS文件系统作为存储资源时，可以参考如下配置示例。该示例中，NFS挂载时指定版本为4.</description>
    </item>
    <item>
      <title>集群中worker节点宕机并恢复后，Pod完成failover，但是Pod所在源主机出现盘符残留</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E9%9B%86%E7%BE%A4%E4%B8%ADworker%E8%8A%82%E7%82%B9%E5%AE%95%E6%9C%BA%E5%B9%B6%E6%81%A2%E5%A4%8D%E5%90%8E-pod%E5%AE%8C%E6%88%90failover-%E4%BD%86%E6%98%AFpod%E6%89%80%E5%9C%A8%E6%BA%90%E4%B8%BB%E6%9C%BA%E5%87%BA%E7%8E%B0%E7%9B%98%E7%AC%A6%E6%AE%8B%E7%95%99/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E9%9B%86%E7%BE%A4%E4%B8%ADworker%E8%8A%82%E7%82%B9%E5%AE%95%E6%9C%BA%E5%B9%B6%E6%81%A2%E5%A4%8D%E5%90%8E-pod%E5%AE%8C%E6%88%90failover-%E4%BD%86%E6%98%AFpod%E6%89%80%E5%9C%A8%E6%BA%90%E4%B8%BB%E6%9C%BA%E5%87%BA%E7%8E%B0%E7%9B%98%E7%AC%A6%E6%AE%8B%E7%95%99/</guid>
      <description>现象描述 worker节点 A上运行Pod, 并通过CSI挂载外置块设备到该Pod；异常掉电节点worker节点A； Kubernetes平台会在感知到节点故障后，将Pod切换至worker节点B；恢复worker节点A， 节点A上的盘符会从正常变为故障。&#xA;环境配置 Kubernetes版本：1.18及以上&#xA;存储类型：块存储&#xA;根因分析 worker节点A恢复后，Kubernetes会向存储发起解除映射操作，但是不会发起主机侧的移除盘符操作。在Kubernetes解除映射后，worker节点A上就会出现盘符残留。&#xA;解决措施或规避方法 目前的解决方法只能人工介入，手动清理掉主机的残留盘符（或者再次重启主机，利用主机重启过程中扫盘机制，清理掉残留盘符）。具体方法如下：&#xA;排查主机的残留盘符。&#xA;执行命令，判断是否存在多路径状态异常的DM多路径设备：&#xA;multipath -ll 命令结果示例如下。路径状态为failed faulty running表示异常，对应的DM多路径设备为dm-12，关联的SCSI磁盘为sdi和sdj，在配置多条路径时，会有多个SCSI磁盘。记录这些SCSI磁盘。&#xA;mpathb (3618cf24100f8f457014a764c000001f6) dm-12 HUAWEI ,XSG1 size=100G features=&amp;#39;0&amp;#39; hwhandler=&amp;#39;0&amp;#39; wp=rw `-+- policy=&amp;#39;service-time 0&amp;#39; prio=-1 status=active |- 39:0:0:1 sdi 8:48 failed faulty running `- 38:0:0:1 sdj 8:64 failed faulty running 是 =&amp;gt; 继续执行步骤1.2。 否 =&amp;gt; 不涉及。 执行以下命令，判断残留的DM多路径设备是否可读。&#xA;dd if=/dev/dm-12 of=/dev/null count=1 bs=1M iflag=direct 命令结果示例如下。如果返回结果为：Input/output error，且读取数据为“0 bytes (0 B) copied”，表示该设备不可读。其中，dm-xx 为步骤1.1查到的设备号。&#xA;dd: error reading ‘/dev/dm-12’: Input/output error 0+0 records in 0+0 records out 0 bytes (0 B) copied, 0.</description>
    </item>
    <item>
      <title>检查卷快照依赖组件信息</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/%E5%88%9B%E5%BB%BAvolumesnapshot/%E6%A3%80%E6%9F%A5%E5%8D%B7%E5%BF%AB%E7%85%A7%E4%BE%9D%E8%B5%96%E7%BB%84%E4%BB%B6%E4%BF%A1%E6%81%AF/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/%E5%88%9B%E5%BB%BAvolumesnapshot/%E6%A3%80%E6%9F%A5%E5%8D%B7%E5%BF%AB%E7%85%A7%E4%BE%9D%E8%B5%96%E7%BB%84%E4%BB%B6%E4%BF%A1%E6%81%AF/</guid>
      <description>如果您需要在容器环境中使用卷快照以及卷快照关联的特性，请通过检查卷快照依赖组件检查您的环境是否部署了卷快照依赖组件以及卷快照api-versions信息。</description>
    </item>
    <item>
      <title>静态卷供应PV参数说明</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E9%9D%99%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E9%9D%99%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94pv%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E9%9D%99%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E9%9D%99%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94pv%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</guid>
      <description>表 1 静态卷供应参数&#xA;参数&#xA;说明&#xA;必选参数&#xA;默认值&#xA;备注&#xA;metadata.name&#xA;自定义的PV对象名称。&#xA;是&#xA;-&#xA;以Kubernetes v1.22.1为例，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以字母数字开头和结尾。&#xA;spec.volumeMode&#xA;卷模式。可选参数。 当使用LUN类型的卷时，支持配置以下类型：&#xA;Filesystem：本地文件系统。Block：裸设备。 否&#xA;Filesystem&#xA;该参数在挂载PV时生效，默认为Filesystem。&#xA;Filesystem表示在容器通过一个本地文件系统访问PV，本地文件系统类型为指定StorageClass中的fsType字段指定。Block表示使用裸卷的方式访问访问PV。 spec.storageClassName&#xA;StorageClass对象名称。必选参数。&#xA;是&#xA;-&#xA;此处须设置为空字符串（即输入&#34;&#34;）。&#xA;spec.accessModes&#xA;指定卷访问模式。&#xA;RWO（ReadWriteOnce）：卷可以被一个节点以读写方式挂载。 该模式也允许运行在同一节点上的多个 Pod 访问卷。ROX（ReadOnlyMany）：卷可以被多个节点以只读方式挂载。RWX（ReadWriteMany）：卷可以被多个节点以读写方式挂载。RWOP（ReadWriteOncePod）：卷只能被单个 Pod 以读写方式挂载。该特性需要 Kubernetes 1.22 以上版本。 是&#xA;ReadWriteOnce&#xA;RWO/ROX/RWOP：所有类型卷均支持，RWOP需Kubernetes 1.22版本以上支持。请参考开启ReadWriteOncePod功能门章节，检查您的Kubernetes集群是否开启该特性。RWX支持情况如下：NAS存储：所有卷均支持。SAN存储：仅volumeMode设置为Block的卷支持。 spec.csi.driver&#xA;CSI驱动名称。&#xA;是&#xA;csi.huawei.com&#xA;该字段需要指定为安装华为CSI时设置的驱动名称。&#xA;spec.csi.volumeHandle&#xA;存储资源的唯一标志。必选参数。&#xA;格式为：&amp;lt;backendName&amp;gt;.&amp;lt;volume-name&amp;gt;&#xA;是&#xA;-&#xA;该参数值由以下两部分构成：&#xA;&amp;lt;backendName&amp;gt;：该卷所在的后端名称，可使用如下命令获取配置的后端信息：oceanctl get backend&#xA;&amp;lt;volume-name&amp;gt;：存储上资源（LUN/文件系统）的名称，可通过DeviceManager查看。 spec.csi.fsType&#xA;指定主机文件系统类型。可选参数。支持类型为：&#xA;ext2ext3ext4xfs 否&#xA;-&#xA;如果不设置，默认为ext4。仅当volumeMode配置为“Filesystem”时生效。&#xA;spec.capacity.storage&#xA;指定卷大小。&#xA;是&#xA;100Gi&#xA;请确保与存储上对应资源的容量保持一致。Kubernetes并不会调用CSI检查此字段值的正确性，所以在PV容量与存储上对应资源的容量不一致也能被成功创建。&#xA;spec.mountOptions.nfsvers&#xA;主机侧NFS挂载选项。支持如下挂载选项：</description>
    </item>
    <item>
      <title>纳管卷供应典型场景StorageClass配置示例</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94%E5%85%B8%E5%9E%8B%E5%9C%BA%E6%99%AFstorageclass%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94%E5%85%B8%E5%9E%8B%E5%9C%BA%E6%99%AFstorageclass%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B/</guid>
      <description>纳管卷供应典型场景下StorageClass配置请参考如下示例：&#xA;StorageClass中设置后端和存储池 StorageClass中设置NFS访问方式 StorageClass中设置本地文件系统访问方式 StorageClass中设置DPC访问方式 StorageClass中设置挂载目录权限 StorageClass中设置后端和存储池 如果在一个Kubernetes集群中配置了多个华为后端，或者一个华为后端提供多个存储池，建议在StorageClass中配置指定的后端和存储池信息，避免华为CSI随机选择后端和存储池，导致卷所在的存储不符合规划。&#xA;SAN存储设置后端和存储池可以参考如下配置示例。&#xA;kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: mysc provisioner: csi.huawei.com allowVolumeExpansion: true parameters: backend: &amp;#34;iscsi-san-181&amp;#34; pool: &amp;#34;pool001&amp;#34; volumeType: lun allocType: thin NAS存储设置后端和存储池可以参考如下配置示例。&#xA;kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: mysc provisioner: csi.huawei.com allowVolumeExpansion: true parameters: backend: &amp;#34;iscsi-nas-181&amp;#34; pool: &amp;#34;pool001&amp;#34; volumeType: fs allocType: thin authClient: &amp;#34;*&amp;#34; StorageClass中设置NFS访问方式 容器使用NFS文件系统作为存储资源时，可以参考如下配置示例。该示例中，NFS挂载时指定版本为4.1。&#xA;kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: mysc provisioner: csi.huawei.com parameters: backend: nfs-nas-181 pool: pool001 volumeType: fs allocType: thin mountOptions: - nfsvers=4.</description>
    </item>
    <item>
      <title>配置华为企业存储后端的ALUA参数</title>
      <link>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/%E9%85%8D%E7%BD%AEalua%E7%89%B9%E6%80%A7/%E9%80%9A%E8%BF%87helm%E9%85%8D%E7%BD%AEalua%E7%89%B9%E6%80%A7/%E9%85%8D%E7%BD%AE%E5%8D%8E%E4%B8%BA%E4%BC%81%E4%B8%9A%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%9A%84alua%E5%8F%82%E6%95%B0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/%E9%85%8D%E7%BD%AEalua%E7%89%B9%E6%80%A7/%E9%80%9A%E8%BF%87helm%E9%85%8D%E7%BD%AEalua%E7%89%B9%E6%80%A7/%E9%85%8D%E7%BD%AE%E5%8D%8E%E4%B8%BA%E4%BC%81%E4%B8%9A%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%9A%84alua%E5%8F%82%E6%95%B0/</guid>
      <description>华为企业存储针对ALUA的配置请参考产品对应的主机连通性指南文档说明。&#xA;针对不同的操作系统，ALUA配置可能有所不同。进入华为技术支持，在搜索输入框中输入“主机连通性指南”，单击搜索。在搜索结果中，选择对应操作系统的主机连通性指南。结合实际需要根据指南的说明进行ALUA配置。华为CSI将在华为存储上对该主机的启动器应用您设置的配置项。&#xA;已经发放的Pod的节点不会主动更改ALUA信息，需要通过在该节点重新发放Pod才会变更主机ALUA配置。&#xA;OceanStor V5系列和OceanStor Dorado V3系列存储后端的ALUA参数 华为CSI支持的OceanStor V5系列和OceanStor Dorado V3系列存储的ALUA参数见表 华为CSI支持的OceanStor V5系列和OceanStor Dorado V3系列存储的ALUA参数说明。&#xA;表 1 华为CSI支持的OceanStor V5系列和OceanStor Dorado V3系列存储的ALUA参数说明&#xA;参数名&#xA;参数描述&#xA;备注&#xA;HostName&#xA;主机名规则。必填，可使用正则表达式。&#xA;主机名通常使用 cat /etc/hostname 可获取。支持正则表达式方式匹配，如当HostName=“*”时，该条配置对任意主机名的主机生效。可参考《正则表达式》。&#xA;当计算节点的主机名可已匹配多条ALUA配置选项，会根据匹配的精确度进行排序，使用第一条ALUA配置选项。排序规则见ALUA配置项匹配主机名的规则。&#xA;MULTIPATHTYPE&#xA;多路径类型。必填，取值为：&#xA;0：不使用第三方多路径1：使用第三方多路径 --&#xA;FAILOVERMODE&#xA;启动器的切换模式。条件必选，取值为：&#xA;0：旧版本ALUA1：通用ALUA2：不使用ALUA3：特殊模式ALUA 当使用第三方多路径时该参数才需要指定。请参考连通性指南的说明，配置启动器的切换模式。&#xA;SPECIALMODETYPE&#xA;启动器的特殊模式类型。条件必选，取值为：&#xA;0：特殊模式01：特殊模式12：特殊模式23：特殊模式3 当启动器的切换模式为“特殊模式ALUA”时该参数才需要指定。请参考连通性指南的说明，配置启动器的特殊模式类型。&#xA;PATHTYPE&#xA;启动器的路径类型。条件必选，取值为：&#xA;0：优选路径1：非优选路径 当使用第三方多路径时该参数才需要指定。请参考连通性指南的说明，配置启动器的路径类型。&#xA;以OceanStor 18500 V5存储对接Red Hat操作系统为例，主机连通性指南见《华为SAN存储在Red Hat系统下的主机连通性指南》。&#xA;如下ALUA设置示例，是非双活存储场景下，OceanStor 18500 V5存储的Red Hat操作系统的连通性指南的推荐设置。本例中假设Kubernetes集群中计算节点“myhost01”的操作系统是RHEL 5.x，其他计算节点操作系统均为RHEL 7.x。根据推荐，RHEL 5.x的切换模式应该为“不使用ALUA”，RHEL 7.x的切换模式应该为“通用ALUA”。&#xA;storage: oceanstor-san name: oceanstor-iscsi-155 urls: - https://192.168.129.155:8088 - https://192.168.129.156:8088 pools: - StoragePool001 parameters: protocol: iscsi portals: - 192.</description>
    </item>
    <item>
      <title>启动huawei-csi-node失败，提示错误为：“/var/lib/iscsi is not a directory”</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%8D%8E%E4%B8%BAcsi%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%90%AF%E5%8A%A8huawei-csi-node%E5%A4%B1%E8%B4%A5-%E6%8F%90%E7%A4%BA%E9%94%99%E8%AF%AF%E4%B8%BA-var-lib-iscsi-is-not-a-directory/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%8D%8E%E4%B8%BAcsi%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%90%AF%E5%8A%A8huawei-csi-node%E5%A4%B1%E8%B4%A5-%E6%8F%90%E7%A4%BA%E9%94%99%E8%AF%AF%E4%B8%BA-var-lib-iscsi-is-not-a-directory/</guid>
      <description>现象描述 启动huawei-csi-node时，无法启动huawei-csi-node服务， 使用kubectl describe daemonset huawei-csi-node -n huawei-csi命令查看，提示错误为：“/var/lib/iscsi is not a directory”。&#xA;根因分析 huawei-csi-node中容器内部无/var/lib/iscsi目录。&#xA;解决措施或规避方法 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;进入Helm工程的目录下，如果无法找到之前的Helm工程，则将组件包中的helm目录拷贝到master节点的任意目录下，组件包路径请参考表 软件包组件描述。&#xA;进入下一级目录templates,找到huawei-csi-node.yaml文件。&#xA;cd /templates 执行以下命令，将huawei-csi-node.yaml &amp;gt; volumes &amp;gt; iscsi-dir &amp;gt; hostPath中“path“设置为“/var/lib/iscsi“ ，然后保存并退出文件。&#xA;vi huawei-csi-node.yaml 执行以下命令升级Helm chart。升级命令将更新Deployment、DaemonSet和RBAC资源。其中，helm-huawei-csi为自定义的chart名称，huawei-csi为自定义的命名空间。&#xA;helm upgrade helm-huawei-csi ./ -n huawei-csi values.yaml 命令结果示例如下。&#xA;Release &amp;#34;helm-huawei-csi&amp;#34; has been upgraded. Happy Helming! NAME: helm-huawei-csi LAST DEPLOYED: Thu Jun 9 07:58:15 2022 NAMESPACE: huawei-csi STATUS: deployed REVISION: 2 TEST SUITE: None </description>
    </item>
    <item>
      <title>如何获取CSI版本信息</title>
      <link>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96csi%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96csi%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF/</guid>
      <description>本章节指导用户如何查看CSI版本信息。&#xA;操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，查看huawei-csi-node所在节点信息。&#xA;kubectl get pod -A -owide | grep huawei-csi-node 命令结果示例如下：&#xA;NAMESPACE NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES huawei-csi huawei-csi-node-87mss 3/3 Running 0 6m41s 192.168.129.155 node-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt; huawei-csi huawei-csi-node-xp8cc 3/3 Running 0 6m41s 192.168.129.156 node-2 &amp;lt;none&amp;gt; &amp;lt;none 使用远程访问工具（以PuTTY为例），通过节点IP地址，登录任意huawei-csi-node所在节点。&#xA;执行以下命令，查看CSI版本信息。&#xA;cat /var/lib/kubelet/plugins/csi.huawei.com/version 命令显示版本信息如下。&#xA;4.5.0 </description>
    </item>
    <item>
      <title>升级华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E6%89%8B%E5%8A%A8%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80/%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi-0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E6%89%8B%E5%8A%A8%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80/%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi-0/</guid>
      <description>本章节介绍如何手动升级华为CSI。&#xA;升级/回退过程中，已经存在的PVC/快照/Pod等资源会正常运行，不会影响您的业务访问。&#xA;部分2.x版本CSI已经下架，若升级失败，可能无法回退到已下架版本的CSI。 在升级/回退过程中，不能使用华为CSI创建新的资源，或者对已有的PVC做挂载/卸载操作。 在升级/回退过程中，请勿卸载Snapshot依赖组件服务。 2.x和3.x版本的CSI升级至4.5.0版本 如果您从2.x和3.x版本的CSI升级至4.5.0版本，请按照以下操作步骤升级：&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行命令备份后端信息到configmap.json文件中。OpenShift平台使用oc替换kubectl命令。&#xA;kubectl get cm huawei-csi-configmap -n huawei-csi -o json &amp;gt; configmap.json 参考手动卸载华为CSI卸载CSI。&#xA;参考手动安装华为CSI安装当前版本的CSI。&#xA;将2中备份的后端信息，按照管理存储后端章节的说明安装。&#xA;从4.x版本的CSI升级至4.5.0版本。 如果您从4.x版本的CSI升级至4.5.0版本，请按照以下操作步骤升级：&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。 参考手动卸载华为CSI卸载CSI。 参考手动安装华为CSI安装当前版本的CSI。 </description>
    </item>
    <item>
      <title>使用Helm开启PVC变更特性</title>
      <link>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E5%BC%80%E5%90%AFpvc%E5%8F%98%E6%9B%B4%E7%89%B9%E6%80%A7/%E4%BD%BF%E7%94%A8helm%E5%BC%80%E5%90%AFpvc%E5%8F%98%E6%9B%B4%E7%89%B9%E6%80%A7/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E5%BC%80%E5%90%AFpvc%E5%8F%98%E6%9B%B4%E7%89%B9%E6%80%A7/%E4%BD%BF%E7%94%A8helm%E5%BC%80%E5%90%AFpvc%E5%8F%98%E6%9B%B4%E7%89%B9%E6%80%A7/</guid>
      <description>前提条件 已使用Helm安装华为CSI。 要求华为CSI v4.5.0及以上版本。 操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令检查PVC变更特性是否开启。&#xA;其中helm-huawei-csi为安装时指定的Helm Chart名称，huawei-csi为安装时指定的Helm Chart命名空间。组件包路径请参考表 软件包组件描述。&#xA;helm get values helm-huawei-csi -n huawei-csi -a | grep volumeModify -A 1 命令结果示例如下：&#xA;若回显内容为“enabled: true”，则表示特性开启，可跳过后续步骤。 若回显内容为“enabled: false”，请按照后续步骤开启PVC变更特性。 volumeModify: enabled: false 进入/helm/esdk目录，执行命令，配置卷变更CRD。&#xA;# kubectl apply -f ./crds/volume-modify/ customresourcedefinition.apiextensions.k8s.io/volumemodifyclaims.xuanwu.huawei.io configured customresourcedefinition.apiextensions.k8s.io/volumemodifycontents.xuanwu.huawei.io configured 如回显中存在“Warning: resource customresourcedefinitions/volumemodifycontents.xuanwu.huawei.io is missing the kubectl.kubernetes.io/last-applied-configuration&amp;hellip;”提示，可忽略该提示。该提示出现原因是由于Helm安装应用时使用的是kubectl create命令而不是kubectl apply命令。&#xA;执行以下命令，获取原有服务配置文件。&#xA;helm get values helm-huawei-csi -n huawei-csi -a &amp;gt; ./update-values.yaml 执行vi update-values.yaml命令打开4中获取的文件，修改以下配置。修改完成后，按Esc，并输入**:wq!**，保存修改。&#xA;csiExtender: volumeModify: enabled: true 执行以下命令更新华为CSI服务。&#xA;helm upgrade helm-huawei-csi .</description>
    </item>
    <item>
      <title>使用oceanctl工具管理后端时调用webhook失败</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E4%BD%BF%E7%94%A8oceanctl%E5%B7%A5%E5%85%B7%E7%AE%A1%E7%90%86%E5%90%8E%E7%AB%AF%E6%97%B6%E8%B0%83%E7%94%A8webhook%E5%A4%B1%E8%B4%A5/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E4%BD%BF%E7%94%A8oceanctl%E5%B7%A5%E5%85%B7%E7%AE%A1%E7%90%86%E5%90%8E%E7%AB%AF%E6%97%B6%E8%B0%83%E7%94%A8webhook%E5%A4%B1%E8%B4%A5/</guid>
      <description>现象描述 当webhook的配置发生改变后，例如修改webhookPort参数值后，此时使用oceanctl工具对后端进行管理时调用webhook报错，如下：&#xA;根因分析 当webhook的配置发生改变后，导致validatingwebhookconfiguration资源失效。&#xA;解决措施或规避方法 执行以下命令，删除validatingwebhookconfiguration资源。&#xA;kubectl delete validatingwebhookconfiguration storage-backend-controller.xuanwu.huawei.io 执行以下命令，重启CSI Controller，请通过“&amp;ndash;replicas=*”恢复CSI Controller的副本数，下例为恢复至1个，请根据实际情况修改。&#xA;kubectl scale deployment huawei-csi-controller -n huawei-csi --replicas=0 kubectl scale deployment huawei-csi-controller -n huawei-csi --replicas=1 执行以下命令，检查CSI Controller是否成功拉起。&#xA;kubectl get pod -n huawei-csi 命令结果示例如下。Pod状态为“Running“说明Controller成功拉起。&#xA;NAME READY STATUS RESTARTS AGE huawei-csi-controller-58d5b6b978-s2dsq 9/9 Running 0 19s huawei-csi-node-dt6nd 3/3 Running 0 77m </description>
    </item>
    <item>
      <title>通过Helm配置存储拓扑感知</title>
      <link>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/%E9%85%8D%E7%BD%AE%E5%AD%98%E5%82%A8%E6%8B%93%E6%89%91%E6%84%9F%E7%9F%A5/%E9%80%9A%E8%BF%87helm%E9%85%8D%E7%BD%AE%E5%AD%98%E5%82%A8%E6%8B%93%E6%89%91%E6%84%9F%E7%9F%A5/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/%E9%85%8D%E7%BD%AE%E5%AD%98%E5%82%A8%E6%8B%93%E6%89%91%E6%84%9F%E7%9F%A5/%E9%80%9A%E8%BF%87helm%E9%85%8D%E7%BD%AE%E5%AD%98%E5%82%A8%E6%8B%93%E6%89%91%E6%84%9F%E7%9F%A5/</guid>
      <description>操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;进入Helm工程的目录下，如果无法找到之前的Helm工程，则将组件包中的helm目录拷贝到master节点的任意目录下，组件包路径请参考表 软件包组件描述。&#xA;进入后端服务配置目录/examples/backend/下，备份backend.yaml文件&#xA;cp backend.yaml backend.yaml.bak 执行vi backend.yaml命令打开文件，按需求配置拓扑感知，示例如下所示。修改完成后，按Esc，并输入 :wq!，保存修改。&#xA;storage: &amp;#34;oceanstor-san&amp;#34; name: &amp;#34;dorado-iscsi-155&amp;#34; namespace: &amp;#34;huawei-csi&amp;#34; urls: - &amp;#34;https://192.168.129.155:8088&amp;#34; pools: - &amp;#34;StoragePool001&amp;#34; parameters: protocol: &amp;#34;iscsi&amp;#34; portals: - &amp;#34;10.10.30.20&amp;#34; - &amp;#34;10.10.30.21&amp;#34; supportedTopologies: - { &amp;#34;topology.kubernetes.io/region&amp;#34;: &amp;#34;China-west&amp;#34;, &amp;#34;topology.kubernetes.io/zone&amp;#34;: &amp;#34;ChengDu&amp;#34; } - { &amp;#34;topology.kubernetes.io/region&amp;#34;: &amp;#34;China-south&amp;#34;,&amp;#34;topology.kubernetes.io/zone&amp;#34;: &amp;#34;ShenZhen&amp;#34; } maxClientThreads: &amp;#34;30&amp;#34; 执行以下命令删除待修改存储后端，其中“dorado-iscsi-155”为存储后端名称。&#xA;oceanctl delete backend dorado-iscsi-155 -n huawei-csi 执行以下命令创建存储后端。&#xA;oceanctl create backend -f ../examples/backend/backend.yaml -i yaml 根据命令提示输入存储用户名和密码。&#xA;Please enter this backend user name:admin Please enter this backend password: 执行vi StorageClass.</description>
    </item>
    <item>
      <title>未创建PSP权限导致Pod无法创建</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AF%B9%E6%8E%A5tanzu-kubernetes%E9%9B%86%E7%BE%A4%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/%E6%9C%AA%E5%88%9B%E5%BB%BApsp%E6%9D%83%E9%99%90%E5%AF%BC%E8%87%B4pod%E6%97%A0%E6%B3%95%E5%88%9B%E5%BB%BA/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AF%B9%E6%8E%A5tanzu-kubernetes%E9%9B%86%E7%BE%A4%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/%E6%9C%AA%E5%88%9B%E5%BB%BApsp%E6%9D%83%E9%99%90%E5%AF%BC%E8%87%B4pod%E6%97%A0%E6%B3%95%E5%88%9B%E5%BB%BA/</guid>
      <description>现象描述 创建huawei-csi-controller和huawei-csi-node时，仅Deployment和DaemonSet资源创建成功，controller和node的Pod未创建。&#xA;根因分析 创建资源使用的service account没有PSP策略的“use”权限。&#xA;解决措施或规避方法 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行vi psp-use.yaml 命令， 创建psp-use.yaml文件。&#xA;vi psp-use.yaml 配置psp-use.yaml文件。&#xA;apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRole metadata: name: huawei-csi-psp-role rules: - apiGroups: [&amp;#39;policy&amp;#39;] resources: [&amp;#39;podsecuritypolicies&amp;#39;] verbs: [&amp;#39;use&amp;#39;] --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: huawei-csi-psp-role-cfg roleRef: kind: ClusterRole name: huawei-csi-psp-role apiGroup: rbac.authorization.k8s.io subjects: - kind: Group apiGroup: rbac.authorization.k8s.io name: system:serviceaccounts:huawei-csi - kind: Group apiGroup: rbac.authorization.k8s.io name: system:serviceaccounts:default 执行以下命令，创建PSP权限。&#xA;kubectl create -f psp-use.yaml </description>
    </item>
    <item>
      <title>下载华为CSI软件包</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E4%B8%8B%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi%E8%BD%AF%E4%BB%B6%E5%8C%85/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E4%B8%8B%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi%E8%BD%AF%E4%BB%B6%E5%8C%85/</guid>
      <description>本章节详细说明了下载方法以及软件包组件结构。&#xA;打开浏览器，访问仓库地址：https://github.com/Huawei/eSDK_K8S_Plugin/releases。&#xA;根据CPU架构，下载对应的4.5.0版本软件包。&#xA;软件包命名规范：插件名称（eSDK_Huawei_Storage_Kubernetes_CSI_Plugin）+版本号+CPU架构&#xA;将下载的软件包解压。软件包组件结构如下表所示。&#xA;表 1 软件包组件描述&#xA;组件&#xA;组件描述&#xA;image/huawei-csi-v4.5.0-arch.tar&#xA;huawei-csi-driver镜像，&#34;arch&#34;为X86或ARM。&#xA;image/storage-backend-controller-v4.5.0-arch.tar&#xA;后端管理控制器镜像，&#34;arch&#34;为X86或ARM。&#xA;image/storage-backend-sidecar-v4.5.0-arch.tar&#xA;后端管理sidecar镜像，&#34;arch&#34;为X86或ARM。&#xA;image/huawei-csi-extender-v4.5.0-arch.tar&#xA;huawei-csi-extender镜像，&#34;arch&#34;为X86或ARM。&#xA;bin/&#xA;华为提供的镜像使用的二进制文件。&#xA;bin/oceanctl&#xA;华为提供的命令行工具，可用于管理存储后端。&#xA;helm/&#xA;Helm工程，用于部署华为CSI。&#xA;manual/&#xA;用于手动安装部署华为CSI。&#xA;examples/&#xA;CSI使用过程中的yaml示例文件。&#xA;examples/backend&#xA;创建存储后端的yaml示例文件。</description>
    </item>
    <item>
      <title>准备PVC变更文件</title>
      <link>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E9%85%8D%E7%BD%AEpvc%E5%8F%98%E6%9B%B4/%E5%88%9B%E5%BB%BApvc%E5%8F%98%E6%9B%B4/%E5%87%86%E5%A4%87pvc%E5%8F%98%E6%9B%B4%E6%96%87%E4%BB%B6/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E9%85%8D%E7%BD%AEpvc%E5%8F%98%E6%9B%B4/%E5%88%9B%E5%BB%BApvc%E5%8F%98%E6%9B%B4/%E5%87%86%E5%A4%87pvc%E5%8F%98%E6%9B%B4%E6%96%87%E4%BB%B6/</guid>
      <description>PVC变更文件说明 PVC变更文件样例模板为/examples/volumemodifyclaim.yaml，具体配置项如下表所示：&#xA;表 1 参数说明&#xA;参数&#xA;描述&#xA;必选参数&#xA;默认值&#xA;备注&#xA;apiVersion&#xA;API组，string类型&#xA;是&#xA;xuanwu.huawei.io/v1&#xA;固定填写xuanwu.huawei.io/v1&#xA;kind&#xA;资源的类型，string类型&#xA;是&#xA;VolumeModifyClaim&#xA;固定填写VolumeModifyClaim&#xA;metadata.name&#xA;集群资源对象的名称，string类型&#xA;是&#xA;-&#xA;名称必须满足DNS 子域名的命名规则，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以小写字母数字字符开头和结尾，最大长度不超过63个字符&#xA;spec.source.kind&#xA;数据源类型，string类型&#xA;是&#xA;StorageClass&#xA;仅支持设置为：StorageClass&#xA;spec.source.name&#xA;数据源名称，string类型&#xA;是&#xA;-&#xA;仅支持设置StorageClass名称&#xA;spec.parameters.hyperMetro&#xA;是否将普通卷变更为双活卷。当前取值仅支持&#34;true&#34;。&#xA;是&#xA;-&#xA;仅支持主站点普通存储卷变更为双活存储卷。&#xA;spec.parameters.metroPairSyncSpeed&#xA;双活Pair同步速率。支持配置为1~4。&#xA;可选值：&#xA;1：低2：中3：高4：最高 否&#xA;-&#xA;当且仅当spec.parameters.hyperMetro为&#34;true&#34;时生效。&#xA;注意：&#xA;未配置该参数时，双活Pair存储速率由存储决定。最高速率同步时可能导致主机时延增大。 spec.source.kind和spec.source.name用于指定卷变更范围，例如配置为StorageClass和对应名称时，将会变更使用目标StorageClass发放的所有的处于Bound状态的PVC。 当所有关联的PVC完成变更后，华为CSI会替换原有的StorageClass，并增加VolumeModifyClaim的spec.parameters参数，使得PVC满足StorageClass定义。 典型场景配置请参考如下示例：&#xA;变更普通卷为双活卷 配置变更普通卷为双活卷示例如下：&#xA;apiVersion: xuanwu.huawei.io/v1 kind: VolumeModifyClaim metadata: name: myvmc spec: source: kind: StorageClass name: mysc parameters: hyperMetro: &amp;#34;true&amp;#34; </description>
    </item>
    <item>
      <title>CCE和CCE Agile回退华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/cce%E5%92%8Ccce-agile%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/cce%E5%92%8Ccce-agile%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/</guid>
      <description> 在升级/回退过程中，已经存在的PVC/快照/Pod等资源会正常运行，不会影响您的业务访问。 在升级/回退过程中，不能使用华为CSI创建新的资源，或者对已有的PVC做挂载/卸载操作。 在升级/回退过程中，请勿卸载Snapshot依赖组件服务。 前提条件 已下载原版本CSI的软件包。&#xA;操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。 参考操作步骤卸载CSI。 参考CCE和CCE Agile平台安装华为CSI重新安装原版本的CSI。 </description>
    </item>
    <item>
      <title>CCE和CCE Agile平台安装华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/cce%E5%92%8Ccce-agile%E5%B9%B3%E5%8F%B0%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/cce%E5%92%8Ccce-agile%E5%B9%B3%E5%8F%B0%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/</guid>
      <description>本章节介绍如何在CCE / CCE Agile平台安装华为CSI。&#xA;制作Helm安装包 CCE和CCE Agile平台无法直接通过Helm安装华为CSI，需要手动制作Helm安装包后上传至平台模板市场进行安装。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录已部署Helm的任意节点。&#xA;将华为CSI组件包中的&amp;quot;helm&amp;quot;目录拷贝到节点的任意目录下。Helm工具路径请参见表 软件包组件描述。&#xA;进入到helm的工作目录下。&#xA;cd helm/ 修改helm/esdk/values.yaml文件中kubeletConfigDir和csiDriver.driverName参数。&#xA;vi ./esdk/values.yaml 修改如下参数：&#xA;# Specify kubelet config dir path. # kubernetes and openshift is usually /var/lib/kubelet # Tanzu is usually /var/vcap/data/kubelet # CCE is usually /mnt/paas/kubernetes/kubelet kubeletConfigDir: /mnt/paas/kubernetes/kubelet # The CSI driver parameter configuration csiDriver: # Driver name, it is strongly recommended not to modify this parameter # The CCE platform needs to modify this parameter, e.</description>
    </item>
    <item>
      <title>CCE和CCE Agile卸载华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/helm%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/cce%E5%92%8Ccce-agile%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/helm%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/cce%E5%92%8Ccce-agile%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/</guid>
      <description>本章节介绍如何在CCE / CCE Agile平台卸载华为CSI，以CCE Agile v22.3.2为例。&#xA;操作步骤 登录CCE Agile平台。&#xA;在主页单击“模板市场&amp;gt; 模板实例 ”，进入模板实例页面。&#xA;选择华为CSI模板实例，单击“卸载”，在弹出的提示框中单击“确定”。&#xA;卸载huawei-csi-host-info对象，请参考卸载huawei-csi-host-info对象进行操作。&#xA;卸载webhook资源，请参考卸载Webhook资源进行操作。&#xA;（可选）卸载快照依赖组件服务，请参考卸载Snapshot依赖组件服务进行操作。</description>
    </item>
    <item>
      <title>Kubernetes、OpenShift、Tanzu升级华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi/kubernetes-openshift-tanzu%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi/kubernetes-openshift-tanzu%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi/</guid>
      <description>前提条件 旧版本华为CSI使用Helm安装。 新版本华为CSI镜像已制作完成，并且按照上传华为CSI镜像章节说明，上传到镜像仓库或者导入到所有节点。 升级华为CSI 如果您旧版本CSI使用Helm部署，请按照以下操作步骤升级华为CSI。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;将目标版本CSI组件包拷贝到master节点的任意目录下。&#xA;进入到helm/esdk的工作目录下，目录路径请参见表 软件包组件描述。&#xA;cd helm/esdk 执行kubectl apply -f ./crds/backend/命令，更新存储后端CRD&#xA;kubectl apply -f ./crds/backend/ （可选） 请务必按照检查卷快照依赖组件章节检查快照依赖组件，确认无误后执行执行kubectl apply -f ./crds/snapshot-crds/ &amp;ndash;validate=false命令更新快照CRD，如果controller.snapshot.enabled参数设置为false或Kubernetes版本低于v1.17，可跳过本步骤，详情请参考表 controller配置项说明。&#xA;kubectl apply -f ./crds/snapshot-crds/ --validate=false 执行以下命令，获取原有服务配置文件。其中helm-huawei-csi为旧版本安装时指定的Helm Chart名称，huawei-csi为旧版本安装时指定的Helm Chart命名空间。&#xA;helm get values helm-huawei-csi -n huawei-csi -a &amp;gt; ./update-values.yaml 执行vi update-values.yaml命令打开6中获取的文件，修改images配置项，更新镜像至最新版本。需要修改的参数请参考表 images配置项。&#xA;表 1 images配置项&#xA;参数&#xA;描述&#xA;修改为&#xA;images.huaweiCSIService&#xA;huawei-csi镜像。&#xA;huawei-csi:4.5.0&#xA;images.storageBackendSidecar&#xA;华为后端管理storageBackendContent资源的镜像&#xA;storage-backend-sidecar:4.5.0&#xA;images.storageBackendController&#xA;华为后端管理storageBackendClaim资源的镜像。&#xA;storage-backend-controller:4.5.0&#xA;images.huaweiCSIExtender&#xA;huawei-csi-extender镜像&#xA;huawei-csi-extender:4.5.0&#xA;images.sidecar.livenessProbe&#xA;livenessprobe sidecar镜像。&#xA;k8s.gcr.io/sig-storage/livenessprobe:v2.5.0&#xA;images.sidecar.provisioner&#xA;csi-provisioner sidecar镜像。</description>
    </item>
    <item>
      <title>Kubernetes特性矩阵</title>
      <link>/docs/%E5%85%BC%E5%AE%B9%E6%80%A7%E5%92%8C%E7%89%B9%E6%80%A7/kubernetes%E7%89%B9%E6%80%A7%E7%9F%A9%E9%98%B5/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%85%BC%E5%AE%B9%E6%80%A7%E5%92%8C%E7%89%B9%E6%80%A7/kubernetes%E7%89%B9%E6%80%A7%E7%9F%A9%E9%98%B5/</guid>
      <description>本章节说明华为CSI在不同Kubernetes版本下支持的特性。&#xA;表 1 Kubernetes版本与支持的特性&#xA;特性&#xA;V1.16&#xA;V1.17&#xA;V1.18&#xA;V1.19&#xA;V1.20&#xA;V1.21+&#xA;Static Provisioning&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;Dynamic Provisioning&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;Manage Provisioning1&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;Expand Persistent Volume&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;Create VolumeSnapshot&#xA;x&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;Restore VolumeSnapshot&#xA;x&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;Delete VolumeSnapshot&#xA;x&#xA;√&#xA;√&#xA;√&#xA;√&#xA;√&#xA;Clone Persistent Volume</description>
    </item>
    <item>
      <title>OceanStor Dorado ALUA特性配置策略样例</title>
      <link>/docs/%E9%99%84%E5%BD%95/oceanstor-dorado-alua%E7%89%B9%E6%80%A7%E9%85%8D%E7%BD%AE%E7%AD%96%E7%95%A5%E6%A0%B7%E4%BE%8B/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%99%84%E5%BD%95/oceanstor-dorado-alua%E7%89%B9%E6%80%A7%E9%85%8D%E7%BD%AE%E7%AD%96%E7%95%A5%E6%A0%B7%E4%BE%8B/</guid>
      <description>例1.配置文件如下：&#xA;parameters: ALUA: &amp;#34;*&amp;#34;: accessMode: 1 hyperMetroPathOptimized: 1 node1: accessMode: 1 hyperMetroPathOptimized: 0 对于主机名为“node1”，上述ALUA配置段都能用于配置启动器。根据配置华为企业存储后端的ALUA参数中的配置策略规则，优先级顺序为第2条配置段（HostName为&amp;quot;node1&amp;quot;）高于第1条配置段（HostName为&amp;quot;*&amp;quot;）。&#xA;例2.配置文件如下：&#xA;parameters: ALUA: node[0-9]: accessMode: 1 hyperMetroPathOptimized: 1 node[5-7]: accessMode: 1 hyperMetroPathOptimized: 0 对于主机名为“node6”的主机，上述ALUA配置段都能用于配置启动器。根据配置华为企业存储后端的ALUA参数中的配置策略规则，选择第一条ALUA配置段来配置启动器。&#xA;例3.配置文件如下：&#xA;parameters: node1$: node[0-9]: accessMode: 1 hyperMetroPathOptimized: 1 node10$: accessMode: 1 hyperMetroPathOptimized: 0 根据配置华为企业存储后端的ALUA参数中的配置策略规则，对于主机名为“node1”的主机，选择第一条ALUA配置段来配置启动器；对于主机名为“node10”的主机，选择第二条ALUA配置段来配置启动器。^表示匹配字符串的开头，$表示匹配字符串的结尾。</description>
    </item>
    <item>
      <title>查询PVC变更</title>
      <link>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E9%85%8D%E7%BD%AEpvc%E5%8F%98%E6%9B%B4/%E6%9F%A5%E8%AF%A2pvc%E5%8F%98%E6%9B%B4/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E9%85%8D%E7%BD%AEpvc%E5%8F%98%E6%9B%B4/%E6%9F%A5%E8%AF%A2pvc%E5%8F%98%E6%9B%B4/</guid>
      <description>本章节介绍如何使用Kubectl查询PVC变更状态，当前华为CSI通过CRD提供以下API。&#xA;查询VolumeModifyClaim 使用kubectl查询VolumeModifyClaim步骤如下。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，查询PVC变更。其中 vmc-name 为VolumeModifyClaim资源名称。&#xA;kubectl get volumemodifyclaims &amp;lt;vmc-name&amp;gt; -owide 命令结果示例如下：&#xA;NAME STATUS READY SOURCEKIND SOURCENAME STARTEDAT COMPLETEDAT AGE myvmc Completed 1/1 StorageClass mysc 2024-06-06T03:19:13Z 2024-06-06T03:19:16Z 2m2s 表 1 回显说明&#xA;名称&#xA;说明&#xA;NAME&#xA;VolumeModifyClaim资源名称。&#xA;STATUS&#xA;VolumeModifyClaim资源状态，可取值如下：&#xA;Pending：初始状态。Creating：VolumeModifyClaim完成基本校验，且服务端已经接收变更任务，但是该任务还未执行完成。Completed：所有关联的PVC均完成变更。Rollback：关联的PVC部分完成变更时，用户执行了删除PVC变更操作。Deleting：关联的PVC全部完成变更时，用户执行了删除PVC变更操作。 READY&#xA;完成变更PVC数量/全部待变更PVC数量。&#xA;SOURCEKIND&#xA;数据源类型，例如StorageClass。&#xA;SOURCENAME&#xA;数据源名称，例如StorageClass名称。&#xA;STARTEDAT&#xA;变更开始时间，指服务端接收该任务并开始处理的时间戳。&#xA;COMPLETEDAT&#xA;变更完成时间，指所有关联的PVC均完成变更后的时时间戳，仅STATUS为Completed时，存在该值。&#xA;AGE&#xA;VolumeModifyClaim从创建至当前的存活时间。&#xA;VolumeModifyClaim支持使用kubectl查看Events信息，当VolumeModifyClaim无法满足创建要求，或者创建过程中出现错误时，服务端将记录Events信息。参考命令如下：&#xA;kubectl describe volumemodifyclaims local-to-hypermetro 查询VolumeModifyContent VolumeModifyContent由VolumeModifyClaim资源创建，记录了单个PVC的变更详情，使用kubectl查询VolumeModifyContent步骤如下。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行命令，查询PVC变更。其中myvmc-uid为VolumeModifyContent资源名称。&#xA;kubectl get volumemodifycontents myvmc-uid -owide 命令结果示例如下：&#xA;NAME STATUS MODIFYCLAIMNAME SOURCEVOLUME STARTEDAT COMPLETEDAT AGE myvmc-uid Completed myvmc default/mypvc 2024-06-06T03:19:07Z 2024-06-06T03:19:09Z 36m 表 2 回显说明</description>
    </item>
    <item>
      <title>查询存储后端</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/</guid>
      <description>请参考查询存储后端节，使用oceanctl命令查询存储后端信息。</description>
    </item>
    <item>
      <title>查询存储后端证书</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E6%96%B0%E5%A2%9E%E8%AF%81%E4%B9%A6%E5%88%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E5%8F%AF%E9%80%89/%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E8%AF%81%E4%B9%A6/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E6%96%B0%E5%A2%9E%E8%AF%81%E4%B9%A6%E5%88%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E5%8F%AF%E9%80%89/%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E8%AF%81%E4%B9%A6/</guid>
      <description>请根据查询存储后端证书所示命令对存储后端证书进行查询。</description>
    </item>
    <item>
      <title>创建Pod时，Pod的状态为ContainerCreating</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E6%97%B6-pod%E7%9A%84%E7%8A%B6%E6%80%81%E4%B8%BAcontainercreating/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E6%97%B6-pod%E7%9A%84%E7%8A%B6%E6%80%81%E4%B8%BAcontainercreating/</guid>
      <description>现象描述 执行完成Pod的创建操作，一段时间后，Pod的状态仍然处于ContainerCreating，查看具体日志信息（详情请参考如何查看华为CSI日志），报错“Fibre Channel volume device not found”。&#xA;根因分析 该问题是因为在主机节点有磁盘残留，导致下次创建Pod时，查找磁盘失败。&#xA;解决措施或规避方法 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，查看Pod所在节点信息。&#xA;kubectl get pod -o wide 命令结果示例如下。&#xA;NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES mypod 0/1 ContainerCreating 0 51s 10.244.1.224 node1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt; 删除Pod。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的 node1 节点。node1 节点为2中查询的节点。&#xA;移除盘符残留，详情请参考解决措施或规避方法。</description>
    </item>
    <item>
      <title>创建PVC变更资源</title>
      <link>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E9%85%8D%E7%BD%AEpvc%E5%8F%98%E6%9B%B4/%E5%88%9B%E5%BB%BApvc%E5%8F%98%E6%9B%B4/%E5%88%9B%E5%BB%BApvc%E5%8F%98%E6%9B%B4%E8%B5%84%E6%BA%90/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E9%85%8D%E7%BD%AEpvc%E5%8F%98%E6%9B%B4/%E5%88%9B%E5%BB%BApvc%E5%8F%98%E6%9B%B4/%E5%88%9B%E5%BB%BApvc%E5%8F%98%E6%9B%B4%E8%B5%84%E6%BA%90/</guid>
      <description>本章节介绍如何基于已配置的PVC变更文件创建PVC变更资源。&#xA;仅支持双活AA模式。 如果变更场景为普通卷变更为双活卷，则仅支持变更主站点端存储卷。 创建PVC变更资源期间，请勿使用华为CSI管理PVC。 不支持对同一个PVC创建多个VolumeModifyClaim资源，若存在对目标PVC的多次变更，请在单次变更完成之后再执行。 操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，创建PVC变更。&#xA;kubectl create -f volumemodifyclaim.yaml 参考查询PVC变更查询创建结果。</description>
    </item>
    <item>
      <title>存储后端配置项说明</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE%E9%A1%B9%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE%E9%A1%B9%E8%AF%B4%E6%98%8E/</guid>
      <description>后端配置文件样例模板为/examples/backend/backend.yaml，该文件为一个示例文件，具体配置项如下表所示：&#xA;表 1 backend配置项说明&#xA;参数&#xA;描述&#xA;必选参数&#xA;默认值&#xA;备注&#xA;storage&#xA;存储服务类型。&#xA;企业存储提供SAN存储时填写oceanstor-san。企业存储提供NAS存储时填写oceanstor-nas。企业存储提供Dtree类型的NAS存储时填写oceanstor-dtree。分布式存储提供SAN存储时填写fusionstorage-san。分布式存储提供NAS存储时填写fusionstorage-nas。 是&#xA;oceanstor-nas&#xA;一个后端只允许提供一种存储服务。如果单套华为存储系统可以同时提供SAN和NAS的存储服务时，可以配置创建多个后端，每个后端使用不同的存储服务类型。&#xA;name&#xA;存储后端名称。支持小写字母、数字和特殊字符&#34;-&#34;，且需要以字母或数字开头，最多63个字符。&#xA;是&#xA;-&#xA;请保证存储后端名称唯一。&#xA;namespace&#xA;命名空间。&#xA;否&#xA;-&#xA;存储后端必须与华为CSI在相同的命名空间中。&#xA;vstoreName&#xA;存储侧的租户名称。当对接后端是OceanStor V5存储，需要在指定租户下发放资源时，需要指定该参数。&#xA;条件必选&#xA;-&#xA;仅对接后端是OceanStor V5且需要支持租户时，需要指定该参数。&#xA;accountName&#xA;存储侧的账户名称。当对接资源是OceanStor Pacific NAS存储，需要在指定账户下发放NAS资源时，需要指定该参数。&#xA;条件必选&#xA;-&#xA;仅对接后端是OceanStor Pacific NAS存储且需要支持账号时，需要指定该参数。&#xA;urls&#xA;存储设备的管理URL。参数格式为列表。支持按照域名或者IP+端口的方式进行配置。仅支持IPv4。&#xA;是&#xA;-&#xA;当对接后端是OceanStor或OceanStor Dorado存储，需要在指定租户下发放资源时，该参数配置为指定租户的逻辑管理端口URL。&#xA;pools&#xA;存储设备的存储池。参数格式为列表。&#xA;条件必选&#xA;-&#xA;storage为oceanstor-dtree时， 可以不填。&#xA;parameters.protocol&#xA;存储协议。参数格式为字符串。&#xA;iscsifcrocefc-nvmenfsdpcscsi 是&#xA;-&#xA;使用iscsi时，请确保对接的计算节点已安装iSCSI客户端。使用nfs时，请确保对接的计算节点已安装NFS客户端工具。使用fc-nvme/roce时，请确保对接的计算节点已安装nvme-cli工具，工具版本仅支持1.x且版本不低于1.9。使用dpc时，请确保对接的计算节点已安装DPC客户端，并已在待接入存储上添加为DPC计算节点。使用scsi时，请确保对接的计算节点已安装分布式存储VBS客户端。 parameters.portals&#xA;业务访问端口。节点会使用该端口对存储资源进行读写访问。参数格式为一个列表&#xA;iscsi，roce协议支持配置多个端口，nfs协议仅支持配置一个端口，fc、fc-nvme、dpc协议无需配置业务端口，scsi协议的端口形式为字典格式，key为主机名称，value为IP地址，仅支持IPv4。&#xA;条件必选&#xA;-&#xA;使用租户/账户对接后端时，此时portals必须配置为租户/账户所拥有的逻辑端口信息。如果使用nfs协议，支持填写为域名地址。 parameters.ALUA&#xA;存储后端ALUA参数配置。当工作节点使用操作系统原生多路径，且启用了ALUA时，需要进行配置。&#xA;条件必选&#xA;-&#xA;如果主机多路径配置启用了ALUA，请确保后端ALUA配置和主机的ALUA配置一致。</description>
    </item>
    <item>
      <title>动态卷供应StorageClass参数说明</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94storageclass%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94storageclass%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</guid>
      <description>表 1 StorageClass配置参数说明&#xA;参数&#xA;说明&#xA;必选参数&#xA;默认值&#xA;备注&#xA;metadata.name&#xA;自定义的StorageClass对象名称。&#xA;是&#xA;-&#xA;以Kubernetes v1.22.1为例，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以字母数字开头和结尾。&#xA;provisioner&#xA;制备器名称。&#xA;是&#xA;csi.huawei.com&#xA;该字段需要指定为安装华为CSI时设置的驱动名称。&#xA;取值和values.yaml文件中driverName一致。&#xA;reclaimPolicy&#xA;回收策略。支持如下类型：&#xA;Delete：自动回收资源。Retain：手动回收资源。 否&#xA;Delete&#xA;Delete：删除PV/PVC时会关联删除存储上的资源。Retain：删除PV/PVC时不会删除存储上的资源。 allowVolumeExpansion&#xA;是否允许卷扩展。参数设置为true 时，使用该StorageClass的PV可以进行扩容操作。&#xA;否&#xA;false&#xA;此功能仅可用于扩容PV，不能用于缩容PV。&#xA;扩容PV功能在Kubernetes 1.14 (alpha)后才支持。&#xA;parameters.backend&#xA;待创建资源所在的后端名称。&#xA;否&#xA;-&#xA;如果不设置，华为CSI随机选择一个满足容量要求的后端创建资源。&#xA;建议指定后端，确保创建的资源在预期的后端上。&#xA;parameters.pool&#xA;待创建资源所在的存储资源池名称。如果设置，则必须设置parameters.backend。&#xA;否&#xA;-&#xA;如果不设置，华为CSI会在所选后端上随机选择一个满足容量要求的存储池创建资源。建议指定存储池，确保创建的资源在预期的存储池上。&#xA;parameters.volumeType&#xA;待创建卷类型。支持如下类型：&#xA;lun：存储侧发放的资源是LUN。fs：存储侧发放的资源是文件系统。dtree：存储侧发放的资源是Dtree类型的卷 是&#xA;-&#xA;使用NAS存储时，必须配置为fs。使用SAN存储时，必须配置为lun。使用Dtree类型的NAS存储时，必须配置为dtree parameters.allocType&#xA;待创建卷的分配类型。支持如下类型：&#xA;thin：创建时不会分配所有需要的空间，而是根据使用情况动态分配。thick：创建时分配所有需要的空间。 否&#xA;-&#xA;传空相当于传thin，创建时不会分配所有需要的空间，而是根据使用情况动态分配。&#xA;OceanStor Dorado/OceanStor Dorado V3 不支持thick&#xA;parameters.fsType&#xA;主机文件系统类型。支持类型为：&#xA;ext2ext3ext4xfs 否&#xA;ext4&#xA;仅当StorageClass的volumeType设置为“lun”，且PVC的volumeMode配置为“Filesystem”时生效。&#xA;parameters.authClient</description>
    </item>
    <item>
      <title>回退华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E6%89%8B%E5%8A%A8%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80/%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi-1/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E6%89%8B%E5%8A%A8%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80/%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi-1/</guid>
      <description>请参考手动卸载华为CSI卸载CSI，然后下载安装升级之前版本的CSI。&#xA;在升级/回退过程中，已经存在的PVC/快照/Pod等资源会正常运行，不会影响您的业务访问。 在升级/回退过程中，不能使用华为CSI创建新的资源，或者对已有的PVC做挂载/卸载操作。 在升级/回退过程中，请勿卸载Snapshot依赖组件服务。 前提条件 已下载原版本CSI的软件包。&#xA;操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。 参考手动卸载华为CSI卸载CSI。 参考手动安装华为CSI重新安装原版本的CSI。 </description>
    </item>
    <item>
      <title>静态卷供应PVC参数说明</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E9%9D%99%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E9%9D%99%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94pvc%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E9%9D%99%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E9%9D%99%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94pvc%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</guid>
      <description>表 1 PVC参数说明&#xA;参数&#xA;说明&#xA;必选参数&#xA;默认值&#xA;备注&#xA;metadata.name&#xA;自定义的PVC对象名称。&#xA;是&#xA;-&#xA;以Kubernetes v1.22.1为例，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以字母数字开头和结尾。&#xA;spec.accessModes&#xA;指定卷访问模式。&#xA;RWO（ReadWriteOnce）：卷可以被一个节点以读写方式挂载。 该模式也允许运行在同一节点上的多个 Pod 访问卷。ROX（ReadOnlyMany）：卷可以被多个节点以只读方式挂载。RWX（ReadWriteMany）：卷可以被多个节点以读写方式挂载。RWOP（ReadWriteOncePod）：卷只能被单个 Pod 以读写方式挂载。该特性需要 Kubernetes 1.22 以上版本。 是&#xA;ReadWriteOnce&#xA;RWO/ROX/RWOP：所有类型卷均支持，RWOP需Kubernetes 1.22版本以上支持。请参考开启ReadWriteOncePod功能门章节，检查您的Kubernetes集群是否开启该特性。RWX支持情况如下：NAS存储：所有卷均支持。SAN存储：仅volumeMode设置为Block的卷支持。 spec.volumeMode&#xA;卷模式。&#xA;否&#xA;Filesystem&#xA;可选， 支持Filesystem或Block， 默认为Filesystem。该参数在创建Pod时生效，其中Filesystem表示在PVC上创建一个文件系统访问存储， Block表示使用裸卷的方式访问存储。&#xA;spec.resources.requests.storage&#xA;指定待创建卷大小。&#xA;是&#xA;-&#xA;指定待创建卷大小，格式为***Gi，单位为GiB。&#xA;PVC容量的规格取决于存储规格限制和主机规格限制。以OceanStor Dorado 6.1.2/OceanStor Pacific系列 8.1.0对接CentOS 7为例，当使用的是ext4文件系统时，容量限制见表 ext4容量的规格；当使用的是XFS文件系统时，容量限制见表 XFS容量的规格。如果使用的是NFS或者裸设备，容量需满足使用的华为存储设备型号和版本所要求的规格约束。&#xA;如果PVC容量不在规格范围内，可能会由于存储规格限制或主机文件系统规格限制导致创建PVC或Pod失败。&#xA;在通过静态PV创建PVC时，若PVC容量小于绑定PV容量，最终PVC容量大小为绑定PV容量，若PVC容量大于绑定PV容量，PVC将无法被创建。&#xA;spec.volumeName&#xA;PV对象名称。&#xA;是&#xA;-&#xA;静态创建PVC时必选。&#xA;spec.storageClassName&#xA;StorageClass对象名称。&#xA;是&#xA;-&#xA;创建PVC时传空字符串，不设置该参数会使用默认的StorageClass对象名称。</description>
    </item>
    <item>
      <title>扩容PVC</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E6%89%A9%E5%AE%B9pvc/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E6%89%A9%E5%AE%B9pvc/</guid>
      <description>当容器使用的PVC容量不足时，需要对该PVC进行扩容操作。&#xA;前提条件 PVC已创建，所在的backend存在且支持扩容。&#xA;支持扩容的存储请参考表 华为企业存储支持的特性及约束和表 华为分布式存储支持的特性及约束，支持扩容的Kubernetes版本请参考Kubernetes特性矩阵。&#xA;huawei-csi-controller启用了csi-resizer服务。&#xA;kubectl describe deploy huawei-csi-controller -n huawei-csi | grep csi-resizer 命令回显示例如下则说明已启用csi-resizer服务。&#xA;csi-resizer: Image: k8s.gcr.io/sig-storage/csi-resizer:v1.4.0 操作步骤 执行命令，查询StorageClass是否支持扩容。其中，mysc 为需要查看的StorageClass名称。&#xA;kubectl get sc mysc 命令结果示例如下：&#xA;NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGE mysc csi.huawei.com Delete Immediate true 172m 如果ALLOWVOLUMEEXPANSION的值为true，表示当前StorageClass已经支持扩容，请跳转至步骤3。&#xA;执行以下命令，将“allowVolumeExpansion“的值修改为“true“。其中，mysc 为需要修改的StorageClass名称。&#xA;kubectl patch sc mysc --patch &amp;#39;{&amp;#34;allowVolumeExpansion&amp;#34;:true}&amp;#39; 执行命令，查询PVC的StorageClass名称。其中，mypvc 为需要扩容的PVC名称。&#xA;kubectl get pvc mypvc 命令结果示例如下：&#xA;NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE mypvc Bound pvc-3383be36-537c-4cb1-8f32-a415fa6ba384 2Gi RW0 mysc 145m 执行以下命令进行扩容。</description>
    </item>
    <item>
      <title>纳管卷供应StorageClass参数说明</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94storageclass%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94storageclass%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</guid>
      <description>存储类（StorageClass）为管理员提供了描述存储 &amp;ldquo;类&amp;rdquo; 的方法。 不同的类型可能会映射到一组不同的能力定义。Kubernetes集群用户可基于StorageClass进行动态卷制备。&#xA;StorageClass支持配置如下参数信息。&#xA;使用SAN存储时可参考示例文件/examples/sc-lun.yaml，使用NAS存储时可参考示例文件/examples/sc-fs.yaml。&#xA;表 1 StorageClass配置参数说明&#xA;参数&#xA;说明&#xA;必选参数&#xA;默认值&#xA;备注&#xA;metadata.name&#xA;自定义的StorageClass对象名称。&#xA;是&#xA;-&#xA;以Kubernetes v1.22.1为例，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以字母数字开头和结尾。&#xA;provisioner&#xA;制备器名称。&#xA;是&#xA;csi.huawei.com&#xA;该字段需要指定为安装华为CSI时设置的驱动名。&#xA;取值和values.yaml文件中driverName一致。&#xA;reclaimPolicy&#xA;回收策略。支持如下类型：&#xA;Delete：自动回收资源。Retain：手动回收资源。 是&#xA;-&#xA;Delete：删除PV/PVC时会关联删除存储上的资源。Retain：删除PV/PVC时不会删除存储上的资源。 allowVolumeExpansion&#xA;是否允许卷扩展。参数设置为true 时，使用该StorageClass的PV可以进行扩容操作。&#xA;否&#xA;false&#xA;此功能仅可用于扩容PV，不能用于缩容PV。&#xA;扩容PV功能在Kubernetes 1.14 (alpha)后才支持。&#xA;parameters.backend&#xA;待创建资源所在的后端名称。&#xA;否&#xA;-&#xA;如果不设置，华为CSI随机选择一个满足容量要求的后端创建资源。&#xA;建议指定后端，确保创建的资源在预期的后端上。&#xA;parameters.volumeType&#xA;待创建卷类型。支持如下类型：&#xA;lun：存储侧发放的资源是LUN。fs：存储侧发放的资源是文件系统。 是&#xA;-&#xA;使用NAS存储时，必须配置为fs。使用SAN存储时，必须配置为lun。 parameters.fsType&#xA;主机文件系统类型。支持类型为：&#xA;ext2ext3ext4xfs 否&#xA;ext4&#xA;仅当StorageClass的volumeType设置为“lun”，且PVC的volumeMode配置为“Filesystem”时生效。&#xA;parameters.applicationType&#xA;后端为OceanStor Dorado存储时，指定创建LUN/NAS时的应用类型名称。&#xA;说明： 若卷纳管前已配置应用类型，applicationType必须与已配置的应用类型保持一致。&#xA;否&#xA;-&#xA;“volumeType”为“lun”时，在DeviceManager管理界面，选择“服务 &amp;gt; 块服务 &amp;gt; LUN组 &amp;gt; LUN &amp;gt; 创建 &amp;gt; 应用类型”，获取应用类型名称。“volumeType”为“fs”时，在DeviceManager管理界面，选择“服务 &amp;gt; 文件服务 &amp;gt; 文件系统 &amp;gt; 创建 &amp;gt; 应用类型”，获取应用类型名称。 parameters.</description>
    </item>
    <item>
      <title>配置VolumeSnapshotClass</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/%E5%88%9B%E5%BB%BAvolumesnapshot/%E9%85%8D%E7%BD%AEvolumesnapshotclass/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/%E5%88%9B%E5%BB%BAvolumesnapshot/%E9%85%8D%E7%BD%AEvolumesnapshotclass/</guid>
      <description>卷快照类（VolumeSnapshotClass）提供了一种在配置VolumeSnapshot时描述存储“类”的方法。每个VolumeSnapshotClass都包含“driver”、“deletionPolicy” 和“parameters”字段， 在需要动态配置属于该类的VolumeSnapshot时使用。&#xA;VolumeSnapshotClass对象的名称很重要，是用户可以请求特定类的方式。 管理员在首次创建VolumeSnapshotClass对象时设置类的名称和其他参数， 对象一旦创建就无法更新。&#xA;华为CSI使用的VolumeSnapshotClass示例如下：&#xA;如果您的环境中api-versions支持v1，请使用以下示例：&#xA;apiVersion: snapshot.storage.k8s.io/v1 kind: VolumeSnapshotClass metadata: name: mysnapclass driver: csi.huawei.com deletionPolicy: Delete 如果您的环境中api-versions支持v1beta1，请使用以下示例：&#xA;apiVersion: snapshot.storage.k8s.io/v1beta1 kind: VolumeSnapshotClass metadata: name: mysnapclass driver: csi.huawei.com deletionPolicy: Delete 如果您的环境中api-versions同时支持v1和v1beta1，我们推荐您使用v1版本。&#xA;实际参数可以参考表 VolumeSnapshotClass参数说明中的说明修改。由于当前华为CSI还不支持在VolumeSnapshotClass中设置自定义参数（parameters），因此建议只创建一个VolumeSnapshotClass，供所有快照使用。&#xA;表 1 VolumeSnapshotClass参数说明&#xA;参数&#xA;说明&#xA;备注&#xA;metadata.name&#xA;自定义的VolumeSnapshotClass对象名称。&#xA;以Kubernetes v1.22.1为例，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以字母数字字符开头和结尾。&#xA;driver&#xA;driver标识。必填参数。&#xA;该字段需要指定为安装华为CSI时设置的驱动名。默认的驱动名为“csi.huawei.com”。&#xA;deletionPolicy&#xA;快照删除策略。必填参数。可选值为：&#xA;DeleteRetain 如果删除策略是 Delete，那么存储设备上的快照会和VolumeSnapshotContent对象一起删除如果删除策略是Retain，那么存储设备上的快照和VolumeSnapshotContent对象都会被保留。 前提条件 华为CSI支持快照且运行所依赖的卷快照组件CRD已经安装。具体CRD信息请参考检查卷快照依赖组件章节说明，支持创建VolumeSnapshot的Kubernetes版本请参考表 Kubernetes版本与支持的特性。&#xA;操作步骤 执行以下命令，使用已经创建的VolumeSnapshotClass配置文件创建VolumeSnapshotClass。&#xA;kubectl create -f mysnapclass.yaml 执行以下命令，查看已创建的VolumeSnapshotClass信息。&#xA;kubectl get volumesnapshotclass 命令结果示例如下：&#xA;NAME DRIVER DELETIONPOLICY AGE mysnapclass csi.</description>
    </item>
    <item>
      <title>配置分布式存储后端的ALUA参数</title>
      <link>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/%E9%85%8D%E7%BD%AEalua%E7%89%B9%E6%80%A7/%E9%80%9A%E8%BF%87helm%E9%85%8D%E7%BD%AEalua%E7%89%B9%E6%80%A7/%E9%85%8D%E7%BD%AE%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%9A%84alua%E5%8F%82%E6%95%B0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/%E9%85%8D%E7%BD%AEalua%E7%89%B9%E6%80%A7/%E9%80%9A%E8%BF%87helm%E9%85%8D%E7%BD%AEalua%E7%89%B9%E6%80%A7/%E9%85%8D%E7%BD%AE%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%9A%84alua%E5%8F%82%E6%95%B0/</guid>
      <description>华为分布式存储针对ALUA的配置请参考产品对应的主机连通性指南文档说明。&#xA;针对不同的操作系统，ALUA配置可能有所不同。进入华为技术支持，在搜索输入框中输入“主机连通性指南”，单击搜索。在搜索结果中，选择对应操作系统的主机连通性指南。结合实际需要根据指南的说明进行ALUA配置。华为CSI将在华为存储上对该主机的启动器应用您设置的配置项。&#xA;已经发放的Pod的节点不会主动更改ALUA信息，需要通过在该节点重新发放Pod才会变更主机ALUA配置。 分布式存储非双活场景，存储系统自身为Active/Active模式，选择“启用ALUA”没有实际意义，建议选择存储默认的“禁用ALUA”。因此不建议对分布式存储配置ALUA参数。&#xA;华为CSI支持的分布式存储的ALUA参数见表 分布式存储ALUA参数说明。&#xA;表 1 分布式存储ALUA参数说明&#xA;参数名&#xA;参数描述&#xA;备注&#xA;HostName&#xA;HostName的值为worker节点的主机名，如HostName1、HostName2。&#xA;主机名通常使用 cat /etc/hostname 可获取。支持正则表达式方式匹配，如当HostName=“*”时，该条配置对任意主机名的主机生效。可参考《正则表达式》。&#xA;当计算节点的主机名可已匹配多条ALUA配置选项，会根据匹配的精确度进行排序，使用第一条ALUA配置选项。排序规则见ALUA配置项匹配主机名的规则。&#xA;switchoverMode&#xA;切换模式。必选，取值为：&#xA;Disable_alua：禁用ALUAEnable_alua：启用ALUA 非双活场景，存储系统自身为Active/Active模式，选择“启用ALUA”没有实际意义，建议选择“禁用ALUA”。当前华为CSI未支持SAN双活场景，请谨慎启用ALUA。&#xA;pathType&#xA;路径类型。条件必选，取值为：&#xA;optimal_path：优选路径non_optimal_path：非优选路径 切换模式为启动ALUA时需要设置该选项。&#xA;ALUA配置项匹配主机名的规则 如果设置的主机名规则精确匹配的业务节点主机名，则使用该主机名规则对应的ALUA配置项。&#xA;如配置项1中主机名规则为“*”，配置项2中的主机名规则为“^myhost01$”。当计算节点的主机名是“myhost01”时，精确匹配配置项2，华为CSI将使用配置项2中的配置应用到存储侧。&#xA;如果设置的主机名规则无法精确匹配的业务节点主机名，则直接使用正则匹配到的第一条ALUA配置项。&#xA;如配置项1中主机名规则为“myhost0[0-9]”，配置项2中的主机名规则为“myhost0[5-9]”，配置项1的优先级高于配置项2。当计算节点的主机名是“myhost06”时，两个配置项均可以匹配，此时华为CSI将使用配置项1中的配置应用到存储侧。</description>
    </item>
    <item>
      <title>启动华为CSI服务失败，提示错误：“/etc/localtime is not a file”</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%8D%8E%E4%B8%BAcsi%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%90%AF%E5%8A%A8%E5%8D%8E%E4%B8%BAcsi%E6%9C%8D%E5%8A%A1%E5%A4%B1%E8%B4%A5-%E6%8F%90%E7%A4%BA%E9%94%99%E8%AF%AF-etc-localtime-is-not-a-file/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%8D%8E%E4%B8%BAcsi%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%90%AF%E5%8A%A8%E5%8D%8E%E4%B8%BAcsi%E6%9C%8D%E5%8A%A1%E5%A4%B1%E8%B4%A5-%E6%8F%90%E7%A4%BA%E9%94%99%E8%AF%AF-etc-localtime-is-not-a-file/</guid>
      <description>现象描述 安装部署CSI时，Pod运行不起来，处于ContainerCreating状态，查看Pod中有打印告警事件：/etc/localtime is not a file。&#xA;根因分析 容器挂载主机/etc/localtime文件时，识别类型有误，容器挂载不上主机侧/etc/localtime文件，导致Pod运行不起来。&#xA;操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行命令，查看CSI服务Pod运行状态。&#xA;kubectl get pod -n huawei-csi 命令结果示例如下。其中，huawei-csi为CSI服务部署的命名空间。&#xA;NAME READY STATUS RESTARTS AGE huawei-csi-controller-6dfcc4b79f-9vjtq 9/9 ContainerCreating 0 24m huawei-csi-controller-6dfcc4b79f-csphc 9/9 ContainerCreating 0 24m huawei-csi-node-g6f4k 3/3 ContainerCreating 0 20m huawei-csi-node-tqs87 3/3 ContainerCreating 0 20m 执行命令，通过查看容器的“Events”参数。&#xA;kubectl describe pod huawei-csi-controller-6dfcc4b79f-9vjtq -n huawei-csi 命令结果示例如下。其中，huawei-csi-controller-6dfcc4b79f-9vjtq 为2中查找到的状态显示为“ContainerCreating”的Pod名称，huawei-csi为该Pod所在的命名空间。&#xA;... Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal Scheduled 96s default-scheduler Successfully assigned huawei-csi/huawei-csi-controller-6dfcc4b79f-9vjtq to node1 Warning FailedMount 33s (x8 over 96s) kubelet MountVolume.</description>
    </item>
    <item>
      <title>如何查看华为CSI日志</title>
      <link>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E5%8D%8E%E4%B8%BAcsi%E6%97%A5%E5%BF%97/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E5%8D%8E%E4%B8%BAcsi%E6%97%A5%E5%BF%97/</guid>
      <description>查看huawei-csi-controller服务的日志 执行以下命令，获取huawei-csi-controller所在的节点&#xA;kubectl get pod -A -o wide | grep huawei 命令结果示例如下，其中IP为节点主机ip，NODE为节点主机名称。&#xA;NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES huawei-csi-controller-695b84b4d8-tg64l 9/9 Running 0 14s &amp;lt;host1-ip&amp;gt; &amp;lt;host1-name&amp;gt; &amp;lt;none&amp;gt; &amp;lt;none&amp;gt; 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群中huawei-csi-controller服务所在节点&#xA;进入日志目录。&#xA;cd /var/log/huawei 执行以下命令，查看容器自定义输出日志。&#xA;vi huawei-csi-controller 进入容器目录。&#xA;cd /var/log/containers 执行以下命令， 查看容器标准输出日志。&#xA;vi huawei-csi-controller-&amp;lt;name&amp;gt;_huawei-csi_huawei-csi-driver-&amp;lt;contrainer-id&amp;gt;.log 查看huawei-csi-node服务的日志 执行以下命令，获取huawei-csi-node所在的节点&#xA;kubectl get pod -A -o wide | grep huawei 命令结果示例如下，其中IP为节点主机ip，NODE为节点主机名称。&#xA;NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES huawei-csi-node-g6f7z 3/3 Running 0 14s &amp;lt;host2-ip&amp;gt; &amp;lt;host2-name&amp;gt; &amp;lt;none&amp;gt; &amp;lt;none&amp;gt; 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群中huawei-csi-node服务所在节点</description>
    </item>
    <item>
      <title>删除PVC前，PVC的状态为Pending</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pvc%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%A0%E9%99%A4pvc%E5%89%8D-pvc%E7%9A%84%E7%8A%B6%E6%80%81%E4%B8%BApending/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pvc%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%A0%E9%99%A4pvc%E5%89%8D-pvc%E7%9A%84%E7%8A%B6%E6%80%81%E4%B8%BApending/</guid>
      <description>现象描述 在执行删除PVC前，PVC的状态处于Pending。&#xA;根因分析 原因1：由于没有提前创建指定名称的StorageClass，导致Kubernetes在创建PVC时无法找到指定StorageClass名称。&#xA;原因2：由于存储池能力和StorageClass能力不匹配，导致huawei-csi选择存储池失败。&#xA;原因3：由于存储RESTful接口执行返回具体错误码（例如：50331651），导致huawei-csi在执行创建PVC时失败。&#xA;原因4：由于存储在huawei-csi设定的超时时间内没有返回，huawei-csi向Kubernetes返回超时错误。&#xA;原因5：其他原因。&#xA;解决措施或规避方法 删除Pending状态下的PVC，需要根据以下不同的原因采取不同的解决措施。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，查看PVC的详细信息。&#xA;kubectl describe pvc mypvc 根据PVC详细信息中Events信息，执行相应操作。&#xA;如果由原因1导致PVC处于Pending状态，可以执行 kubectl delete pvc mypvc 命令，删除PVC。&#xA;Events: Type Reason Age From Message ---- ------ ---- ---- ------- Warning ProvisioningFailed 0s (x15 over 3m24s) persistentvolume-controller storageclass.storage.k8s.io &amp;#34;mysc&amp;#34; not found 如果由原因2导致PVC处于Pending状态，可以执行 kubectl delete pvc mypvc 命令，删除PVC。&#xA;Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal Provisioning 63s (x3 over 64s) csi.huawei.com_huawei-csi-controller-b59577886-qqzm8_58533e4a-884c-4c7f-92c3-6e8a7b327515 External provisioner is provisioning volume for claim &amp;#34;default/mypvc&amp;#34; Warning ProvisioningFailed 63s (x3 over 64s) csi.</description>
    </item>
    <item>
      <title>上传华为CSI镜像</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E4%B8%8A%E4%BC%A0%E5%8D%8E%E4%B8%BAcsi%E9%95%9C%E5%83%8F/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E4%B8%8A%E4%BC%A0%E5%8D%8E%E4%B8%BAcsi%E9%95%9C%E5%83%8F/</guid>
      <description>华为提供huawei-csi镜像供用户使用，镜像文件获取请参考下载华为CSI软件包。&#xA;为了后续在容器管理平台中可以使用CSI镜像，需要按照以下方式中的一种提前将CSI镜像导入到集群中：&#xA;使用Docker工具，将CSI镜像上传至镜像仓库（推荐）。 手动将CSI镜像导入到所有需要部署华为CSI的节点。 上传镜像到镜像仓库 安装华为CSI依赖如下三个华为提供的镜像文件，请按照说明依次导入并上传下列镜像文件，镜像文件获取请参考下载华为CSI软件包。&#xA;huawei-csi-v4.5.0-arch.tar storage-backend-controller-v4.5.0-arch.tar storage-backend-sidecar-v4.5.0-arch.tar huawei-csi-extender-v4.5.0-arch.tar 前提条件&#xA;已准备一台已安装Docker的Linux主机，且该主机支持访问镜像仓库。&#xA;操作步骤&#xA;执行docker load -i huawei-csi-v4.5.0-arch.tar命令，将CSI镜像导入当前节点。&#xA;docker load -i huawei-csi-v4.5.0-arch.tar 执行docker tag huawei-csi:4.5.0 repo.huawei.com/huawei-csi:4.5.0命令，添加镜像仓库地址到镜像标签。其中repo.huawei.com表示镜像仓库的地址。&#xA;docker tag huawei-csi:4.5.0 repo.huawei.com/huawei-csi:4.5.0 执行docker push repo.huawei.com/huawei-csi:4.5.0命令，将CSI镜像上传到镜像仓库。其中repo.huawei.com表示镜像仓库的地址。&#xA;docker push repo.huawei.com/huawei-csi:4.5.0 也可以使用containerd来进行镜像的导入和上传。 CCE / CCE Agile平台请参考该平台用户手册完成镜像导入和上传。 上传镜像到本地节点 若镜像已上传至镜像仓库，则跳过本章节。&#xA;前提条件&#xA;该节点已获取对应的华为CSI镜像文件，镜像文件获取请参考下载华为CSI软件包。 该节点已经安装Docker或其他容器引擎。 操作步骤&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录需要导入镜像的节点。&#xA;将Kubernetes CSI组件包中的&amp;quot;image&amp;quot;目录拷贝到当前节点的任意目录下。&#xA;执行cd image命令，进入到image的工作目录。工具路径请参见表 软件包组件描述。&#xA;执行命令依次将image目录下的所有华为CSI镜像导入至本地节点，其中 name 参数是镜像tar包的名字。&#xA;使用Docker容器引擎执行：&#xA;docker load -i &amp;lt;name&amp;gt;.tar 使用containerd容器引擎执行：&#xA;ctr -n k8s.io image import &amp;lt;name&amp;gt;.tar 使用Podman容器引擎执行：&#xA;podman load -i &amp;lt;name&amp;gt;.</description>
    </item>
    <item>
      <title>使用oceanctl工具创建后端失败，报错：context deadline exceeded</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E4%BD%BF%E7%94%A8oceanctl%E5%B7%A5%E5%85%B7%E5%88%9B%E5%BB%BA%E5%90%8E%E7%AB%AF%E5%A4%B1%E8%B4%A5-%E6%8A%A5%E9%94%99-context-deadline-exceeded/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E4%BD%BF%E7%94%A8oceanctl%E5%B7%A5%E5%85%B7%E5%88%9B%E5%BB%BA%E5%90%8E%E7%AB%AF%E5%A4%B1%E8%B4%A5-%E6%8A%A5%E9%94%99-context-deadline-exceeded/</guid>
      <description>现象描述 用户使用oceanctl工具创建存储后端失败，控制台回显：“failed to call webhook: xxx :context deadline exceeded; error: exist status 1”。&#xA;根因分析 创建存储后端时，将会调用CSI提供的webhook服务校验与存储管理网络的连通性和存储账号密码信息，出现该问题原因可能是以下两种原因：&#xA;华为CSI校验存储管理网络连通性失败。 kube-apiserver和CSI webhook通信异常。 华为CSI校验存储管理网络连通性失败 请按照以下步骤检查是否是华为CSI校验存储管理网络连通性失败。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行命令，获取CSI服务信息。其中，huawei-csi为CSI服务部署的命名空间。&#xA;kubectl get pod -n huawei-csi -owide 命令结果示例如下：&#xA;NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES huawei-csi-controller-xxx 9/9 Running 0 19h host-ip1 host-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt; huawei-csi-node-mnqbz 3/3 Running 0 19h host-ip1 host-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt; 登录huawei-csi-controller所在节点，如2中的host-1。&#xA;进入到/var/log/huawei目录。&#xA;# cd /var/log/huawei 查看storage-backend-controller日志，以连接存储超时为例。&#xA;tail -n 1000 storage-backend-controller 日志示例如下：&#xA;2024-01-01 06:30:44.</description>
    </item>
    <item>
      <title>手动安装华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/</guid>
      <description>本章节介绍如何手动安装华为CSI。&#xA;手动安装华为CSI当前仅支持Kubernetes平台。&#xA;安装步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录集群的任意master节点。&#xA;将Kubernetes CSI组件包中的&amp;quot;manual&amp;quot;目录拷贝到master节点的任意目录下。&#xA;执行命令创建一个命名空间。&#xA;kubectl create ns huawei-csi 进入到manual/esdk的工作目录下。具体路径请参见表 软件包组件描述。&#xA;cd manual/esdk 执行命令，更新存储后端CRD&#xA;kubectl apply -f ./crds/backend/ （可选） 请务必按照检查卷快照依赖组件章节检查快照依赖组件，确认无误后执行执行命令更新快照CRD，如果Kubernetes版本低于v1.17，跳过本步骤。&#xA;kubectl apply -f ./crds/snapshot-crds/ --validate=false （可选） 执行命令安装CSIDriver。如果不使用CSIDriver特性，可跳过本步骤，详情请参考CSIDriver特性。&#xA;kubectl apply -f ./deploy/csidriver.yaml 执行命令安装huawei-csi-controller服务。如果Kubernetes版本低于v1.17，删除名称为csi-snapshotter和snapshot-controller的容器，并根据检查CSI依赖的镜像中的版本要求，修改其它容器镜像版本。&#xA;kubectl apply -f ./deploy/huawei-csi-controller.yaml 执行命令安装huawei-csi-node服务。&#xA;kubectl apply -f ./deploy/huawei-csi-node.yaml 执行命令检查服务是否启动。&#xA;kubectl get pod -n huawei-csi 回显示例如下，Pod状态为“Running“则安装成功。&#xA;NAME READY STATUS RESTARTS AGE huawei-csi-controller-68745d489c-v5xkj 9/9 Running 0 13m huawei-csi-node-4hbqp 3/3 Running 0 13m huawei-csi-node-f7dkf 3/3 Running 0 13m huawei-csi-node-xrntc 3/3 Running 0 13m 多副本controller部署场景下可以通过修改 .</description>
    </item>
    <item>
      <title>手动方式开启PVC变更特性</title>
      <link>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E5%BC%80%E5%90%AFpvc%E5%8F%98%E6%9B%B4%E7%89%B9%E6%80%A7/%E6%89%8B%E5%8A%A8%E6%96%B9%E5%BC%8F%E5%BC%80%E5%90%AFpvc%E5%8F%98%E6%9B%B4%E7%89%B9%E6%80%A7/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E5%BC%80%E5%90%AFpvc%E5%8F%98%E6%9B%B4%E7%89%B9%E6%80%A7/%E6%89%8B%E5%8A%A8%E6%96%B9%E5%BC%8F%E5%BC%80%E5%90%AFpvc%E5%8F%98%E6%9B%B4%E7%89%B9%E6%80%A7/</guid>
      <description>前提条件 已使用手动方式安装华为CSI。&#xA;操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;进入manual/esdk工作目录下，执行以下命令，配置卷变更CRD。&#xA;kubectl apply -f ./crds/volume-modify/ 执行以下命令。组件包路径请参考表 软件包组件描述。&#xA;kubectl apply -f ./deploy/huawei-csi-controller-extender.yaml 执行命令检查服务是否启动。&#xA;kubectl get pod -n huawei-csi 命令结果示例如下，其中huawei-csi为华为CSI部署命名空间。&#xA;NAME READY STATUS RESTARTS AGE huawei-csi-controller-6dfcc4b79f-9vjtq 10/10 Running 0 24m huawei-csi-node-tqs87 3/3 Running 0 24m </description>
    </item>
    <item>
      <title>手动更新存储后端</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E6%9B%B4%E6%96%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E6%89%8B%E5%8A%A8%E6%9B%B4%E6%96%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E6%9B%B4%E6%96%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E6%89%8B%E5%8A%A8%E6%9B%B4%E6%96%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/</guid>
      <description> PVC发放需要基于已配置的存储后端，因此当存储后端已经发放PVC时，请勿随便修改存储后端。 名称是存储后端的唯一标识，已发放PVC的存储后端不允许修改名称。 存储后端修改后，新增配置仅作用于新发放的卷。 存储后端修改期间，请勿执行卷管理操作。 操作步骤 参考删除存储后端章节，删除待修改存储后端。 参考创建存储后端章节，创建同名存储后端，存储后端名称不可变更。 </description>
    </item>
    <item>
      <title>手动卸载华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/%E6%89%8B%E5%8A%A8%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/%E6%89%8B%E5%8A%A8%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/</guid>
      <description>本章节介绍如何手动卸载华为CSI。&#xA;如果您不是出于升级的目的卸载华为CSI，请确保卸载华为CSI前已经在您的容器平台中将华为CSI发放的资源（PV、PVC、快照、存储后端等）全部清理。否则一旦您卸载华为CSI后，这些资源将无法被自动调度、管理或者清理。&#xA;卸载huawei-csi-node服务 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令卸载 huawei-csi-node 服务，huawei-csi 替换为华为CSI所在的命名空间。&#xA;kubectl delete daemonset huawei-csi-node -n huawei-csi 执行以下命令检查服务是否已成功卸载（如果提示NotFound错误，表示已成功卸载）。&#xA;kubectl get daemonset huawei-csi-node -n huawei-csi 卸载huawei-csi-controller服务 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令卸载 huawei-csi-controller 服务，huawei-csi 替换为华为CSI所在的命名空间。&#xA;kubectl delete deployment huawei-csi-controller -n huawei-csi 执行以下命令检查服务是否已成功卸载（如果提示NotFound错误，表示已成功卸载）。&#xA;kubectl get deployment huawei-csi-controller -n huawei-csi 卸载csidriver对象 如果安装时未使用CSIDriver特性，可跳过本步骤。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令卸载csidriver对象。&#xA;kubectl delete csidriver csi.huawei.com 执行以下命令检查服务是否已成功卸载（如果提示NotFound错误，表示已成功卸载）。&#xA;kubectl get csidriver csi.huawei.com 删除RBAC权限 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;删除RBAC权限。&#xA;kubectl -n huawei-csi -l provisioner=csi.huawei.com delete ServiceAccount,Service,role,rolebinding,ClusterRole,ClusterRoleBinding 其它资源卸载 卸载huawei-csi-host-info对象，请参考卸载huawei-csi-host-info对象进行操作。 卸载webhook资源，请参考卸载Webhook资源进行操作。 （可选）卸载快照依赖组件服务，请参考卸载Snapshot依赖组件服务进行操作。 （可选）卸载Lease资源，请参考卸载Lease资源进行操作。 </description>
    </item>
    <item>
      <title>修改主机挂载点</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AF%B9%E6%8E%A5tanzu-kubernetes%E9%9B%86%E7%BE%A4%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E6%8C%82%E8%BD%BD%E7%82%B9/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AF%B9%E6%8E%A5tanzu-kubernetes%E9%9B%86%E7%BE%A4%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E6%8C%82%E8%BD%BD%E7%82%B9/</guid>
      <description>现象描述 创建Pod时失败，华为CSI日志中报错“mount point does not exist”。&#xA;根因分析 huawei-csi-node中的“pods-dir”目录原生Kubernetes集群与Tanzu Kubernetes集群不一致。&#xA;解决措施或规避方法 进入helm/esdk/目录，执行vi values.yaml命令打开配置文件。&#xA;vi values.yaml 将kubeletConfigDir参数修改为kubelet实际的安装目录。&#xA;# Specify kubelet config dir path. # kubernetes and openshift is usually /var/lib/kubelet # Tanzu is usually /var/vcap/data/kubelet kubeletConfigDir: /var/vcap/data/kubelet </description>
    </item>
    <item>
      <title>CCE和CCE Agile升级华为CSI</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi/cce%E5%92%8Ccce-agile%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%8D%87%E7%BA%A7-%E5%9B%9E%E9%80%80%E5%8D%8E%E4%B8%BAcsi/%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi/cce%E5%92%8Ccce-agile%E5%8D%87%E7%BA%A7%E5%8D%8E%E4%B8%BAcsi/</guid>
      <description>前提条件 已下载新版本CSI的软件包。&#xA;操作步骤 参考CCE和CCE Agile卸载华为CSI卸载CSI。 参考CCE和CCE Agile平台安装华为CSI安装新版本的CSI。 </description>
    </item>
    <item>
      <title>Helm values.yaml参数说明</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/helm-values-yaml%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/%E4%BD%BF%E7%94%A8helm%E5%AE%89%E8%A3%85%E5%8D%8E%E4%B8%BAcsi/helm-values-yaml%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</guid>
      <description>在使用Helm安装CSI时，需要您根据部署时需要使用的特性准备Helm工程的values.yaml文件。华为CSI已经在软件包的helm/esdk目录下提供了values.yaml模板文件。&#xA;本章节将详细说明values.yaml中的配置项以及典型场景下的后端配置示例。&#xA;images参数配置说明 values.yaml中的images配置项主要配置华为CSI运行时依赖的组件镜像信息。需要配置的参数如下：&#xA;表 1 images配置项说明&#xA;参数&#xA;描述&#xA;必选参数&#xA;默认值&#xA;images.huaweiCSIService&#xA;huawei-csi镜像。&#xA;是&#xA;huawei-csi:4.5.0&#xA;images.storageBackendSidecar&#xA;华为后端管理sidecar镜像。&#xA;是&#xA;storage-backend-sidecar:4.5.0&#xA;images.storageBackendController&#xA;华为后端管理控制器镜像。&#xA;是&#xA;storage-backend-controller:4.5.0&#xA;images.huaweiCSIExtender&#xA;huawei-csi-extender镜像&#xA;否&#xA;huawei-csi-extender:4.5.0&#xA;images.sidecar.livenessProbe&#xA;livenessprobe sidecar镜像。&#xA;是&#xA;k8s.gcr.io/sig-storage/livenessprobe:v2.5.0&#xA;images.sidecar.provisioner&#xA;csi-provisioner sidecar镜像。&#xA;是&#xA;k8s.gcr.io/sig-storage/csi-provisioner:v3.0.0&#xA;images.sidecar.attacher&#xA;csi-attacher sidecar镜像。&#xA;是&#xA;k8s.gcr.io/sig-storage/csi-attacher:v3.4.0&#xA;images.sidecar.resizer&#xA;csi-resizer sidecar镜像。&#xA;是&#xA;k8s.gcr.io/sig-storage/csi-resizer:v1.4.0&#xA;images.sidecar.snapshotter&#xA;csi-snapshotter sidecar镜像。&#xA;是&#xA;k8s.gcr.io/sig-storage/csi-snapshotter:v4.2.1&#xA;images.sidecar.snapshotController&#xA;snapshot-controller sidecar镜像。&#xA;是&#xA;k8s.gcr.io/sig-storage/snapshot-controller:v4.2.1&#xA;images.sidecar.registrar&#xA;csi-node-driver-registrar sidecar镜像。&#xA;是&#xA;k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.3.0&#xA;huaweiCSIService、storageBackendSidecar、storageBackendController、huaweiCSIExtender参数的值，请参考上传华为CSI镜像章节的说明，使用最终生成镜像的名称和版本。 其他sidecar镜像参数，请参考检查CSI依赖的镜像章节的说明，使用最终上传的镜像的名称和版本。 controller参数配置说明 controller配置项用于配置huawei-csi-controller组件的相关配置。&#xA;表 2 controller配置项说明&#xA;参数</description>
    </item>
    <item>
      <title>oceanctl命令说明</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/oceanctl%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/oceanctl%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E/</guid>
      <description>帮助说明 获取oceanctl帮助说明。&#xA;oceanctl --help 查看oceanctl版本号。&#xA;oceanctl version 指定自定义日志文件目录，以查看oceanctl版本号为例。&#xA;oceanctl version --log-dir=/path/to/custom 创建存储后端 执行以下命令获取创建后端帮助。&#xA;oceanctl create backend -h 执行以下命令根据指定的yaml文件创建存储后端。&#xA;oceanctl create backend -f /path/to/backend.yaml -i yaml 执行以下命令根据指定的json文件创建存储后端，json文件仅支持通过json格式导出huawei-csi-configmap文件。&#xA;oceanctl create backend -f /path/to/configmap.json -i json 执行以下命令在指定命名空间创建一个存储后端。&#xA;oceanctl create backend -f /path/to/backend.yaml -i yaml -n &amp;lt;namespace&amp;gt; 执行以下命令创建存储后端，并忽略存储后端名称校验，例如大写和字符“_”，非必要请勿使用该命令。&#xA;oceanctl create backend -f /path/to/backend.yaml -i yaml --not-validate-name 执行以下命令创建存储后端，并指定provisioner，其中“csi.oceanstor.com”是安装时指定的驱动名称，详情可以参考4。&#xA;仅在CCE / CCE Agile平台创建后端时使用该命令。&#xA;oceanctl create backend -f /path/to/backend.yaml -i yaml --provisioner=csi.oceanstor.com 查询存储后端 执行以下命令获取查询后端帮助。&#xA;oceanctl get backend -h 执行以下命令查询默认命名空间下单个存储后端。</description>
    </item>
    <item>
      <title>创建Pod时，Pod的状态长时间处于ContainerCreating状态</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E6%97%B6-pod%E7%9A%84%E7%8A%B6%E6%80%81%E9%95%BF%E6%97%B6%E9%97%B4%E5%A4%84%E4%BA%8Econtainercreating%E7%8A%B6%E6%80%81/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E6%97%B6-pod%E7%9A%84%E7%8A%B6%E6%80%81%E9%95%BF%E6%97%B6%E9%97%B4%E5%A4%84%E4%BA%8Econtainercreating%E7%8A%B6%E6%80%81/</guid>
      <description>现象描述 创建Pod时，Pod长时间处于ContainerCreating状态，此时查看huawei-csi-node的日志信息（详情请参考如何查看华为CSI日志），huawei-csi-node的日志中无创建Pod的日志记录，执行kubectl get volumeattachment命令后，PV列无该Pod使用的PV名称。在等待较长时间后（超过十分钟），Pod正常创建，Pod状态变为Running状态。&#xA;根因分析 该问题是因为Kubernetes的kube-controller-manager组件服务异常导致。&#xA;解决措施或规避方法 请联系容器平台侧工程师解决。</description>
    </item>
    <item>
      <title>存储侧更新密码后账户被锁定</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%AD%98%E5%82%A8%E4%BE%A7%E6%9B%B4%E6%96%B0%E5%AF%86%E7%A0%81%E5%90%8E%E8%B4%A6%E6%88%B7%E8%A2%AB%E9%94%81%E5%AE%9A/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%AD%98%E5%82%A8%E4%BE%A7%E6%9B%B4%E6%96%B0%E5%AF%86%E7%A0%81%E5%90%8E%E8%B4%A6%E6%88%B7%E8%A2%AB%E9%94%81%E5%AE%9A/</guid>
      <description>现象描述 用户在存储侧修改后端密码之后，该后端账号被锁定。&#xA;根因分析 CSI登录存储时使用存储后端配置的账户和密码，当存储侧修改了该账户密码之后，CSI登录失败后会重试。以OceanStor Dorado存储为例，默认的登录策略是密码校验失败3次后将会锁定账户，因此当CSI重试超过3次之后，该账户就会被锁定。&#xA;解决措施或规避方法 如果后端配置的账户是admin，请执行以下命令，将huawei-csi-controller服务副本数置为0，如果使用的是非admin账户，忽略此步骤。&#xA;kubectl scale deployment huawei-csi-controller -n huawei-csi --replicas=0 使用admin账户登录存储，修改登录策略。以OceanStor Dorado存储为例，在DeviceManager管理界面，选择“设置 &amp;gt; 用户与安全 &amp;gt; 安全策略 &amp;gt;登录策略 &amp;gt;修改&amp;gt;密码锁定”，取消密码锁定。&#xA;如果如果后端配置的账户是admin，执行以下命令，通过“&amp;ndash;replicas=*”恢复CSI Controller的副本数，下例为恢复至1个，请根据实际情况修改。如果使用的是非admin账户，忽略此步骤。&#xA;kubectl scale deployment huawei-csi-controller -n huawei-csi --replicas=1 使用oceanctl工具修改存储后端密码，修改后端密码请参考更新存储后端章节。&#xA;使用admin账户登录存储，修改登录策略，以OceanStor Dorado存储为例，在DeviceManager管理界面，选择“设置 &amp;gt; 用户与安全 &amp;gt; 安全策略 &amp;gt;登录策略 &amp;gt;修改&amp;gt;密码锁定”，恢复密码锁定。</description>
    </item>
    <item>
      <title>动态卷供应PVC参数说明</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94pvc%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94/%E5%8A%A8%E6%80%81%E5%8D%B7%E4%BE%9B%E5%BA%94pvc%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</guid>
      <description>在完成配置StorageClass以后，就可以用该StorageClass来配置PVC。PVC的配置模板请参考华为CSI软件包中的examples目录下的pvc*.yaml文件示例。&#xA;表 1 pvc*.yaml文件示例参数说明&#xA;参数&#xA;说明&#xA;必选参数&#xA;默认值&#xA;备注&#xA;metadata.name&#xA;自定义的PVC对象名称。&#xA;是&#xA;-&#xA;以Kubernetes v1.22.1为例，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以字母数字开头和结尾。&#xA;spec.volumeMode&#xA;卷模式。可选参数。 当使用LUN类型的卷时，支持配置以下类型：&#xA;Filesystem：本地文件系统。Block：裸设备。 否&#xA;Filesystem&#xA;该参数在挂载PV时生效，默认为Filesystem。&#xA;Filesystem表示在容器通过一个本地文件系统访问PV，本地文件系统类型为指定StorageClass中的fsType字段指定, Dtree类型存储也使用此参数进行描述。Block表示使用裸卷的方式访问访问PV。 spec.storageClassName&#xA;StorageClass对象名称。&#xA;是&#xA;-&#xA;业务需要的StorageClass对象名称。&#xA;spec.resources.requests.storage&#xA;指定待创建卷大小，格式为***Gi，单位为GiB。需要满足大小为512字节的整数倍。&#xA;是&#xA;10Gi&#xA;PVC容量的规格取决于存储规格限制和主机规格限制。以OceanStor Dorado 6.1.2/OceanStor Pacific系列 8.1.0对接CentOS 7为例，当使用的是ext4文件系统时，容量限制见表 ext4容量的规格；当使用的是XFS文件系统时，容量限制见表 XFS容量的规格。如果使用的是NFS或者裸设备，容量需满足使用的华为存储设备型号和版本所要求的规格约束。&#xA;如果PVC容量不在规格范围内，可能会由于存储规格限制或主机文件系统规格限制导致创建PVC或Pod失败。&#xA;spec.accessModes&#xA;指定卷访问模式。&#xA;RWO（ReadWriteOnce）：卷可以被一个节点以读写方式挂载。 该模式也允许运行在同一节点上的多个 Pod 访问卷。ROX（ReadOnlyMany）：卷可以被多个节点以只读方式挂载。RWX（ReadWriteMany）：卷可以被多个节点以读写方式挂载。RWOP（ReadWriteOncePod）：卷只能被单个 Pod 以读写方式挂载。该特性需要 Kubernetes 1.22 以上版本。 是&#xA;ReadWriteOnce&#xA;RWO/ROX/RWOP：所有类型卷均支持，RWOP需Kubernetes 1.22版本以上支持。请参考开启ReadWriteOncePod功能门章节，检查您的Kubernetes集群是否开启该特性。RWX支持情况如下：NAS存储：所有卷均支持。SAN存储：仅volumeMode设置为Block的卷支持。 表 2 ext4容量的规格&#xA;存储类型&#xA;存储规格限制&#xA;ext4规格限制&#xA;CSI规格限制&#xA;OceanStor Dorado 6.1.2&#xA;512Ki~256Ti&#xA;50Ti&#xA;512Ki~50Ti</description>
    </item>
    <item>
      <title>分布式存储ALUA特性配置策略样例</title>
      <link>/docs/%E9%99%84%E5%BD%95/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8alua%E7%89%B9%E6%80%A7%E9%85%8D%E7%BD%AE%E7%AD%96%E7%95%A5%E6%A0%B7%E4%BE%8B/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%99%84%E5%BD%95/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8alua%E7%89%B9%E6%80%A7%E9%85%8D%E7%BD%AE%E7%AD%96%E7%95%A5%E6%A0%B7%E4%BE%8B/</guid>
      <description>例1.配置文件如下：&#xA;parameters: ALUA: &amp;#34;*&amp;#34;: switchoverMode: Enable_alua pathType: optimal_path node1: switchoverMode: Enable_alua pathType: non_optimal_path 对于主机名为“node1”，上述ALUA配置段都能用于配置启动器。根据配置分布式存储后端的ALUA参数中的配置策略规则，优先级顺序为第2条配置段（HostName为&amp;quot;node1&amp;quot;）高于第1条配置段（HostName为&amp;quot;*&amp;quot;）。&#xA;例2.配置文件如下：&#xA;parameters: ALUA: node[0-9]: switchoverMode: Enable_alua pathType: optimal_path node[5-7]: switchoverMode: Enable_alua pathType: non_optimal_path 对于主机名为“node6”的主机，上述ALUA配置段都能用于配置启动器。根据配置分布式存储后端的ALUA参数中的配置策略规则，选择第一条ALUA配置段来配置启动器。&#xA;例3.配置文件如下：&#xA;parameters: ALUA: node1$: switchoverMode: Enable_alua pathType: optimal_path node10$: switchoverMode: Enable_alua pathType: non_optimal_path 根据配置分布式存储后端的ALUA参数中的配置策略规则，对于主机名为“node1”的主机，选择第一条ALUA配置段来配置启动器；对于主机名为“node10”的主机，选择第二条ALUA配置段来配置启动器。^表示匹配字符串的开头，$表示匹配字符串的结尾。</description>
    </item>
    <item>
      <title>更新存储后端证书</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E6%96%B0%E5%A2%9E%E8%AF%81%E4%B9%A6%E5%88%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E5%8F%AF%E9%80%89/%E6%9B%B4%E6%96%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E8%AF%81%E4%B9%A6/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E6%96%B0%E5%A2%9E%E8%AF%81%E4%B9%A6%E5%88%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E5%8F%AF%E9%80%89/%E6%9B%B4%E6%96%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E8%AF%81%E4%B9%A6/</guid>
      <description>更新证书前请准备好新的证书文件，并参考本章节更新存储后端证书。如果不再使用证书，请参考删除存储后端证书章节移除存储后端上的证书。&#xA;更新证书步骤 执行以下命令获取存储后端。&#xA;oceanctl get backend 命令结果示例如下。&#xA;NAMESPACE NAME PROTOCOL STORAGETYPE SN STATUS ONLINE URL huawei-csi backend-1 roce oceanstor-san xxxxxxxxxxxxxxxxxxxx Bound true https://192.168.129.157:8088 huawei-csi backend-2 roce oceanstor-san xxxxxxxxxxxxxxxxxxxx Bound true https://192.168.129.158:8088 执行以下命令查看指定存储后端是否存在证书。&#xA;oceanctl get cert -b backend-1 命令结果示例如下。&#xA;NAMESPACE NAME BOUNDBACKEND huawei-csi cert-1 backend-1 执行以下命令更新指定存储后端的证书。&#xA;oceanctl update cert -b backend-1 -f /path/to/cert.crt </description>
    </item>
    <item>
      <title>华为企业存储兼容性</title>
      <link>/docs/%E5%85%BC%E5%AE%B9%E6%80%A7%E5%92%8C%E7%89%B9%E6%80%A7/%E5%8D%8E%E4%B8%BA%E4%BC%81%E4%B8%9A%E5%AD%98%E5%82%A8%E5%85%BC%E5%AE%B9%E6%80%A7/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%85%BC%E5%AE%B9%E6%80%A7%E5%92%8C%E7%89%B9%E6%80%A7/%E5%8D%8E%E4%B8%BA%E4%BC%81%E4%B8%9A%E5%AD%98%E5%82%A8%E5%85%BC%E5%AE%B9%E6%80%A7/</guid>
      <description>华为CSI插件兼容华为OceanStor系列的全闪存存储和混合闪存存储，具体支持的存储版本如下表所示：&#xA;表 1 支持的华为企业存储&#xA;存储产品&#xA;版本&#xA;OceanStor V5&#xA;V500R007, V500R007 Kunpeng&#xA;OceanStor Dorado V3&#xA;V300R002&#xA;OceanStor&#xA;6.1.3, 6.1.5, 6.1.6, 6.1.7, 6.1.8&#xA;OceanStor Dorado&#xA;6.1.0, 6.1.2, 6.1.3, 6.1.5, 6.1.6, 6.1.7, 6.1.8&#xA;华为CSI插件针对华为企业存储支持如下特性。&#xA;表 2 华为企业存储支持的特性及约束&#xA;特性&#xA;OceanStor V5&#xA;OceanStor Dorado V3&#xA;OceanStor&#xA;OceanStor Dorado&#xA;Static Provisioning&#xA;SAN：FC/iSCSI2&#xA;NAS：NFS 3&#xA;SAN：FC/iSCSI2&#xA;SAN：FC/iSCSI/NVMe over RoCE/NVMe over FC3&#xA;NAS：NFS 3/4.0/4.1/4.2&#xA;SAN：FC/iSCSI/NVMe over RoCE/NVMe over FC3&#xA;NAS：NFS 3/4.0/4.1/4.24&#xA;Dynamic Provisioning&#xA;Manage Provisioning1&#xA;Expand Persistent Volume5</description>
    </item>
    <item>
      <title>检查华为存储上的用户配置</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E6%A3%80%E6%9F%A5%E5%8D%8E%E4%B8%BA%E5%AD%98%E5%82%A8%E4%B8%8A%E7%9A%84%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E6%A3%80%E6%9F%A5%E5%8D%8E%E4%B8%BA%E5%AD%98%E5%82%A8%E4%B8%8A%E7%9A%84%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE/</guid>
      <description>当华为存储接入容器平台后，华为CSI需要在华为存储上根据业务要求，管理存储资源，如创建卷、映射卷等操作。此时，华为CSI需要使用华为存储上已经创建的用户和华为存储进行通信。针对不同存储设备所需要的用户信息如下表所示。&#xA;表 1 存储对接CSI时使用的用户要求&#xA;存储类型&#xA;用户类型&#xA;角色&#xA;级别&#xA;类型&#xA;OceanStor V5&#xA;系统用户&#xA;管理员&#xA;管理员&#xA;本地用户&#xA;租户用户&#xA;租户管理员&#xA;管理员&#xA;本地用户&#xA;OceanStor Dorado V3&#xA;系统用户&#xA;管理员&#xA;管理员&#xA;本地用户&#xA;OceanStor 6.1.3, 6.1.5, 6.1.6, 6.1.7, 6.1.8&#xA;系统用户&#xA;管理员/自定义角色1&#xA;N/A&#xA;本地用户&#xA;OceanStor Dorado 6.1.0, 6.1.2, 6.1.3, 6.1.5, 6.1.6, 6.1.7, 6.1.8&#xA;系统用户&#xA;管理员/自定义角色1&#xA;N/A&#xA;本地用户&#xA;租户用户&#xA;租户管理员&#xA;N/A&#xA;本地用户&#xA;OceanStor Pacific系列&#xA;系统用户&#xA;管理员&#xA;N/A&#xA;本地用户&#xA;注释1 使用自定义角色，需要给角色配置权限，最小权限请参考配置自定义权限章节配置。 不推荐使用“超级管理员”角色下的用户。</description>
    </item>
    <item>
      <title>克隆PVC</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%85%8B%E9%9A%86pvc/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%85%8B%E9%9A%86pvc/</guid>
      <description>本章节描述如何克隆PVC。&#xA;在克隆PVC时，需要指定数据源。如下示例是一个简单的克隆PVC示例，在该示例中，使用“mypvc”作为数据源，新创建了一个名叫“myclone”的PVC。&#xA;kind: PersistentVolumeClaim apiVersion: v1 metadata: name: myclone spec: storageClassName: mysc dataSource: name: mypvc kind: PersistentVolumeClaim volumeMode: Filesystem accessModes: - ReadWriteOnce resources: requests: storage: 2Gi 指定的storageClassName必须和dataSource中的源卷的StorageClass需一致。 克隆卷的容量必须不小于源卷容量，建议和源卷容量保持一致。 前提条件 系统中已经存在源PVC，且源PVC所在的backend存在支持克隆。支持克隆的存储请参考表 华为企业存储支持的特性及约束和表 华为分布式存储支持的特性及约束，支持克隆的Kubernetes版本请参考Kubernetes特性矩阵。&#xA;操作步骤 执行以下命令，基于克隆卷的配置文件创建PVC。&#xA;kubectl create -f myclone.yaml </description>
    </item>
    <item>
      <title>纳管卷供应PVC参数说明</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94pvc%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E5%88%9B%E5%BB%BApvc/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94/%E7%BA%B3%E7%AE%A1%E5%8D%B7%E4%BE%9B%E5%BA%94pvc%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/</guid>
      <description>在完成配置StorageClass以后，就可以用该StorageClass来配置PVC。PVC的配置模板请参考华为CSI软件包中的examples目录下的pvc-manager.yaml文件示例。&#xA;表 1 pvc-manager.yaml文件示例参数说明&#xA;参数&#xA;说明&#xA;必选参数&#xA;默认值&#xA;备注&#xA;metadata.annotations&#xA;PVC对象的注释。配置以下参数：&#xA;驱动名称/manageVolumeName：卷在存储侧的名称。驱动名称/manageBackendName：卷所属后端的名称。 是&#xA;csi.huawei.com/manageVolumeName: * csi.huawei.com/manageBackendName: *&#xA;驱动名称获取请参考表4。驱动名称/manageVolumeName：为存储上已有卷的名称，除英文字符外，其他国家字符不支持。驱动名称/manageBackendName：CSI中存储后端的名称。 可执行oceanctl get backend -n huawei-csi命令获取后端名称。&#xA;metadata.labels&#xA;PVC对象的标签。&#xA;否&#xA;-&#xA;格式：provisioner: 安装时指定的驱动名称。&#xA;例如 provisioner: csi.huawei.com。&#xA;该参数在创建PVC时生效，用于监听PVC资源，获取metadata.annotations信息。&#xA;metadata.name&#xA;自定义的PVC对象名称。&#xA;是&#xA;-&#xA;以Kubernetes v1.22.1为例，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以字母数字开头和结尾。&#xA;spec.volumeMode&#xA;卷模式。可选参数。 当使用LUN类型的卷时，支持配置以下类型：&#xA;Filesystem：本地文件系统。Block：裸设备。 说明： 该参数在挂载PV时生效，需要与纳管卷的使用方式保持一致。&#xA;如果卷纳管之前是以裸卷方式使用，volumeMode必须配置为Block。如果卷纳管之前是以ext2/ext3/ext4方式使用，volumeMode必须配置为Filesystem，且StorageClass中fsType必须指定为ext2/ext3/ext4。如果卷纳管之前是以XFS方式使用，volumeMode必须配置为Filesystem，且StorageClass中fsType必须指定为xfs。 否&#xA;Filesystem&#xA;该参数在挂载PV时生效。&#xA;Filesystem表示在容器通过一个本地文件系统访问PV，本地文件系统类型为指定StorageClass中的fsType字段指定。Block表示使用裸卷的方式访问访问PV。 spec.storageClassName&#xA;StorageClass对象名称。&#xA;是&#xA;-&#xA;StorageClass的配置需要与纳管卷的配置保持一致。&#xA;spec.resources.requests.storage&#xA;指定待创建卷大小，格式为***Gi，单位为GiB。需要满足大小为512字节的整数倍。&#xA;是&#xA;-&#xA;PVC容量的规格取决于存储规格限制和主机规格限制。以OceanStor Dorado 6.1.2/OceanStor Pacific系列 8.1.0对接CentOS 7为例，当使用的是ext4文件系统时，容量限制见表2；当使用的是XFS文件系统时，容量限制见表3。如果使用的是NFS或者裸设备，容量需满足使用的华为存储设备型号和版本所要求的规格约束。&#xA;如果PVC容量不在规格范围内，可能会由于存储规格限制或主机文件系统规格限制导致创建PVC或Pod失败。&#xA;spec.accessModes&#xA;指定卷访问模式。&#xA;RWO（ReadWriteOnce）：卷可以被一个节点以读写方式挂载。 该模式也允许运行在同一节点上的多个 Pod 访问卷。ROX（ReadOnlyMany）：卷可以被多个节点以只读方式挂载。RWX（ReadWriteMany）：卷可以被多个节点以读写方式挂载。RWOP（ReadWriteOncePod）：卷只能被单个 Pod 以读写方式挂载。该特性需要 Kubernetes 1.</description>
    </item>
    <item>
      <title>配置VolumeSnapshot</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/%E5%88%9B%E5%BB%BAvolumesnapshot/%E9%85%8D%E7%BD%AEvolumesnapshot/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/%E5%88%9B%E5%BB%BAvolumesnapshot/%E9%85%8D%E7%BD%AEvolumesnapshot/</guid>
      <description>VolumeSnapshot可以通过两种方式进行制备：预制备或动态制备。华为CSI当前仅支持动态制备。本章节将说明如何使用华为CSI动态制备VolumeSnapshot。&#xA;VolumeSnapshot的配置文件示例如下：&#xA;如果您的环境中api-versions支持v1，请使用以下示例：&#xA;apiVersion: snapshot.storage.k8s.io/v1 kind: VolumeSnapshot metadata: name: mysnapshot spec: volumeSnapshotClassName: mysnapclass source: persistentVolumeClaimName: mypvc 如果您的环境中api-versions支持v1beta1，请使用以下示例：&#xA;apiVersion: snapshot.storage.k8s.io/v1beta1 kind: VolumeSnapshot metadata: name: mysnapshot spec: volumeSnapshotClassName: mysnapclass source: persistentVolumeClaimName: mypvc VolumeSnapshot中api-versions信息，请和创建VolumeSnapshotClass使用的版本保持一致。&#xA;实际参数可以参考表 VolumeSnapshot参数说明中的说明修改。&#xA;表 1 VolumeSnapshot参数说明&#xA;参数&#xA;说明&#xA;备注&#xA;metadata.name&#xA;自定义的VolumeSnapshot对象名称。&#xA;以Kubernetes v1.22.1为例，支持数字、小写字母、中划线（-）和点（.）的组合，并且必须以字母数字字符开头和结尾。&#xA;spec.volumeSnapshotClassName&#xA;VolumeSnapshotClass对象名称。&#xA;--&#xA;spec.source.persistentVolumeClaimName&#xA;源PVC对象名称。&#xA;快照源PVC对应的名称&#xA;前提条件 源PVC存在，且PVC所在的backend存在支持创建VolumeSnapshot。支持创建VolumeSnapshot的存储请参考表 华为企业存储支持的特性及约束和表 华为分布式存储支持的特性及约束，支持创建VolumeSnapshot的Kubernetes版本请参考表 Kubernetes版本与支持的特性。 华为CSI运行所依赖的卷快照组件CRD已经安装。具体信息请参考检查卷快照依赖组件章节说明。 系统中已经存在使用华为CSI的VolumeSnapshotClass。 操作步骤 执行以下命令，使用已经创建的VolumeSnapshot配置文件创建VolumeSnapshot。&#xA;kubectl create -f mysnapshot.yaml 执行以下命令，查看已创建的VolumeSnapshot信息。&#xA;kubectl get volumesnapshot 命令结果示例如下：&#xA;NAME READYTOUSE SOURCEPVC SOURCESNAPSHOTCONTENT RESTORESIZE SNAPSHOTCLASS SNAPSHOTCONTENT CREATIONTIME AGE mysnapshot true mypvc 100Gi mysnapclass snapcontent-1009af0a-24c2-4435-861c-516224503f2d &amp;lt;invalid&amp;gt; 78s </description>
    </item>
    <item>
      <title>启动huawei-csi服务时，服务启动异常， 状态显示InvalidImageName</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%8D%8E%E4%B8%BAcsi%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%90%AF%E5%8A%A8huawei-csi%E6%9C%8D%E5%8A%A1%E6%97%B6-%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E5%BC%82%E5%B8%B8-%E7%8A%B6%E6%80%81%E6%98%BE%E7%A4%BAinvalidimagename/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%8D%8E%E4%B8%BAcsi%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%90%AF%E5%8A%A8huawei-csi%E6%9C%8D%E5%8A%A1%E6%97%B6-%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E5%BC%82%E5%B8%B8-%E7%8A%B6%E6%80%81%E6%98%BE%E7%A4%BAinvalidimagename/</guid>
      <description>现象描述 启动huawei-csi时，无法启动huawei-csi服务（huawei-csi-controller服务或者huawei-csi-node服务），使用kubectl get pod -A | grep huawei命令查看，显示状态为InvalidImageName&#xA;kubectl get pod -A | grep huawei 命令结果示例如下。&#xA;huawei-csi huawei-csi-controller-fd5f97768-qlldc 6/9 InvalidImageName 0 16s huawei-csi huawei-csi-node-25txd 2/3 InvalidImageName 0 15s 根因分析 controller和node的yaml配置文件中，配置Huawei CSI的镜像版本号错误。例如：&#xA;... - name: huawei-csi-driver image: huawei-csi:4.5.0 ... 解决措施或规避方法 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，修改huawei-csi-node服务的配置文件。按I或Insert进入编辑状态，修改相关参数。修改完成后，按Esc，并输入 :wq! ，保存修改。&#xA;kubectl edit daemonset huawei-csi-node -o yaml -n=huawei-csi 示例yaml文件中huawei-csi-driver的参数image配置项，修改华为CSI镜像huawei-csi:4.5.0。 containers: ... - name: huawei-csi-driver image: huawei-csi:4.5.0 执行以下命令，修改huawei-csi-controller服务的配置文件。按I或Insert进入编辑状态，修改相关参数。修改完成后，按Esc，并输入 :wq! ，保存修改。&#xA;kubectl edit deployment huawei-csi-controller -o yaml -n=huawei-csi 示例yaml文件中huawei-csi-driver的参数image配置项，修改华为CSI镜像huawei-csi:4.5.0。 containers: .</description>
    </item>
    <item>
      <title>日志收集</title>
      <link>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/</guid>
      <description>前置检查 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群内有oceanctl工具的节点。&#xA;执行以下命令，显示版本号为v4.5.0。&#xA;oceanctl version 命令结果示例如下：&#xA;Oceanctl Version: v4.5.0 执行oceanctl collect logs &amp;ndash;help命令，返回信息如下。&#xA;$ oceanctl collect logs --help Collect logs of one or more nodes in specified namespace in Kubernetes Usage: oceanctl collect logs [flags] Examples: # Collect logs of all nodes in specified namespace oceanctl collect logs -n &amp;lt;namespace&amp;gt; # Collect logs of specified node in specified namespace oceanctl collect logs -n &amp;lt;namespace&amp;gt; -N &amp;lt;node&amp;gt; # Collect logs of all nodes in specified namespace oceanctl collect logs -n &amp;lt;namespace&amp;gt; -a # Collect logs of all nodes in specified namespace with a maximum of 50 nodes collected at the same time oceanctl collect logs -n &amp;lt;namespace&amp;gt; -a --threads-max=50 # Collect logs of specified node in specified namespace oceanctl collect logs -n &amp;lt;namespace&amp;gt; -N &amp;lt;node&amp;gt; -a Flags: -a, --all Collect all nodes messages -h, --help help for logs -n, --namespace string namespace of resources -N, --nodename string Specify the node for which information is to be collected.</description>
    </item>
    <item>
      <title>删除PVC变更</title>
      <link>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E9%85%8D%E7%BD%AEpvc%E5%8F%98%E6%9B%B4/%E5%88%A0%E9%99%A4pvc%E5%8F%98%E6%9B%B4/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/pvc%E5%8F%98%E6%9B%B4/%E9%85%8D%E7%BD%AEpvc%E5%8F%98%E6%9B%B4/%E5%88%A0%E9%99%A4pvc%E5%8F%98%E6%9B%B4/</guid>
      <description>当VolumeModifyClaim的STATUS值为Creating时，删除VolumeModifyClaim资源，将会在存储侧删除此次变更创建的资源，然后移除集群资源。在删除后，如果继续使用原有的StorageClass进行PVC管理，需要将关联的存储后端恢复为非双活存储后端。 当VolumeModifyClaim的STATUS值为Pending或Completed时，删除VolumeModifyClaim资源，仅会移除集群资源，不会和存储交互，即不会在存储侧删除变更创建的资源。 VolumeModifyContent被VolumeModifyClaim管理，请勿手动管理VolumeModifyContent资源。 若待变更PVC中已有部分PVC满足变更要求，当批量变更失败时，会移除掉所有PVC的变更，导致已满足变更条件的PVC不再满足。 若待变更PVC已经在存储侧被手动管理，则可能导致变更失败。使用变更特性时，请勿手动管理存储卷。 当前章节介绍如何使用kubectl删除PVC变更，基于步骤如下。&#xA;操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，删除PVC变更。其中 vmc-name 为VolumeModifyClaim资源名称。&#xA;kubectl delete volumemodifyclaims &amp;lt;vmc-name&amp;gt; 参考创建PVC变更资源查询删除结果。</description>
    </item>
    <item>
      <title>通用临时卷扩容失败</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pvc%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E9%80%9A%E7%94%A8%E4%B8%B4%E6%97%B6%E5%8D%B7%E6%89%A9%E5%AE%B9%E5%A4%B1%E8%B4%A5/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pvc%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E9%80%9A%E7%94%A8%E4%B8%B4%E6%97%B6%E5%8D%B7%E6%89%A9%E5%AE%B9%E5%A4%B1%E8%B4%A5/</guid>
      <description>现象描述 在Kubernetes版本低于1.25环境中，对LUN类型的通用临时卷扩容失败，显示PV已经扩容，但PVC未成功更新容量。&#xA;根因分析 该问题是由Kubernetes的bug导致，Kubernetes在1.25版本中修复了该问题。</description>
    </item>
    <item>
      <title>下载容器镜像</title>
      <link>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E4%B8%8B%E8%BD%BD%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E4%B8%8B%E8%BD%BD%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F/</guid>
      <description>使用containerd下载容器镜像 执行以下命令，下载镜像到本地。其中 image:tag 表示需要拉取的镜像及其标签。&#xA;ctr image pull &amp;lt;image&amp;gt;:&amp;lt;tag&amp;gt; 执行以下命令，导出镜像到文件。其中 image:tag 表示需要导出的镜像，file 表示镜像导出后的文件名称。&#xA;ctr image export &amp;lt;file&amp;gt;.tar &amp;lt;image&amp;gt;:&amp;lt;tag&amp;gt; 使用Docker下载容器镜像 执行以下命令，下载镜像到本地。其中 image:tag 表示需要拉取的镜像及其标签。&#xA;docker pull &amp;lt;image&amp;gt;:&amp;lt;tag&amp;gt; 执行以下命令，导出镜像到文件。其中 image:tag 表示需要导出的镜像，file 表示镜像导出后的文件名称。&#xA;docker save &amp;lt;image&amp;gt;:&amp;lt;tag&amp;gt; -o &amp;lt;file&amp;gt;.tar 使用Podman下载容器镜像 执行以下命令，下载镜像到本地。其中 image:tag 表示需要拉取的镜像及其标签。&#xA;podman pull &amp;lt;image&amp;gt;:&amp;lt;tag&amp;gt; 执行以下命令，导出镜像到文件。其中 image:tag 表示需要导出的镜像，file 表示镜像导出后的文件名称。&#xA;podman save &amp;lt;image&amp;gt;:&amp;lt;tag&amp;gt; -o &amp;lt;file&amp;gt;.tar </description>
    </item>
    <item>
      <title>卸载CSI依赖组件服务</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/helm%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/%E5%8D%B8%E8%BD%BDcsi%E4%BE%9D%E8%B5%96%E7%BB%84%E4%BB%B6%E6%9C%8D%E5%8A%A1/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/helm%E5%8D%B8%E8%BD%BD%E5%8D%8E%E4%B8%BAcsi/%E5%8D%B8%E8%BD%BDcsi%E4%BE%9D%E8%B5%96%E7%BB%84%E4%BB%B6%E6%9C%8D%E5%8A%A1/</guid>
      <description>本章节介绍如何卸载CSI依赖组件服务。&#xA;卸载huawei-csi-host-info对象 名称为huawei-csi-host-info的Secret对象中保存着集群中各个节点的启动器信息，例如iSCSI启动器。使用helm uninstall命令时不会卸载该资源，若需卸载该资源，请参考以下步骤：&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令卸载Secret对象，其中huawei-csi-host-info是Secret对象的名称，huawei-csi是Secret对象所在的命名空间。&#xA;kubectl delete secret huawei-csi-host-info -n huawei-csi 执行以下命令检查Secret对象是否卸载成功。&#xA;kubectl get secret huawei-csi-host-info -n huawei-csi 命令结果示例如下，如果命令回显提示“NotFound”表示huawei-csi-host-info对象已成功卸载。&#xA;Error from server (NotFound): secrets &amp;#34;huawei-csi-host-info&amp;#34; not found 卸载Webhook资源 名称为storage-backend-controller.xuanwu.huawei.io的webhook资源用于校验Backend的秘钥信息和与存储的连通性，使用helm uninstall命令时不会卸载该资源，若需卸载该资源，请参考以下步骤：&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，查询webhook依赖组件服务。&#xA;kubectl get validatingwebhookconfigurations.admissionregistration.k8s.io storage-backend-controller.xuanwu.huawei.io 命令结果如下。&#xA;NAME WEBHOOKS AGE storage-backend-controller.xuanwu.huawei.io 1 12d 执行以下命令，卸载webhook依赖组件服务。&#xA;kubectl delete validatingwebhookconfigurations.admissionregistration.k8s.io storage-backend-controller.xuanwu.huawei.io 执行以下命令，检查服务是否已成功卸载。如果结果为空，表示已成功卸载。&#xA;kubectl get validatingwebhookconfigurations.admissionregistration.k8s.io storage-backend-controller.xuanwu.huawei.io 卸载Snapshot依赖组件服务 请勿在存在快照时卸载Snapshot依赖组件服务，否则Kubernetes会自动删除所有的用户快照且无法恢复，请谨慎操作。详细说明请参见删除 CustomResourceDefinition。 请勿在CSI升级时卸载Snapshot依赖组件服务。 场景说明&#xA;当前华为CSI使用了快照特性。 当前Kubernetes集群仅存在华为CSI，且不再使用华为CSI。 在卸载前请确保在Kubernetes集群中已经没有华为CSI管理的VolumeSnapshot资源。 操作步骤&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，卸载Snapshot依赖组件服务。&#xA;kubectl delete crd volumesnapshotclasses.snapshot.storage.k8s.io volumesnapshotcontents.snapshot.storage.k8s.io volumesnapshots.</description>
    </item>
    <item>
      <title>修改livenessprobe容器的默认端口</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AF%B9%E6%8E%A5tanzu-kubernetes%E9%9B%86%E7%BE%A4%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/%E4%BF%AE%E6%94%B9livenessprobe%E5%AE%B9%E5%99%A8%E7%9A%84%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AF%B9%E6%8E%A5tanzu-kubernetes%E9%9B%86%E7%BE%A4%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/%E4%BF%AE%E6%94%B9livenessprobe%E5%AE%B9%E5%99%A8%E7%9A%84%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3/</guid>
      <description>现象描述 huawei-csi-controller组件中livenessprobe容器一直重启。&#xA;根因分析 huawei-csi-controller的livenessprobe容器的默认端口（9808）与已有的Tanzu的vSphere CSI端口冲突。&#xA;解决措施或规避方法 将livenessprobe容器的默认端口修改为未占用端口。&#xA;进入“helm/esdk”目录，执行vi values.yaml命令打开配置文件。&#xA;vi values.yaml 将controller.livenessProbePort默认值9808修改为其他未占用端口，例如改为9809。&#xA;controller: livenessProbePort: 9809 使用Helm更新华为CSI，具体信息请参考升级华为CSI。</description>
    </item>
    <item>
      <title>PVC扩容的目标容量超过存储池容量导致扩容失败</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pvc%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/pvc%E6%89%A9%E5%AE%B9%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AE%B9%E9%87%8F%E8%B6%85%E8%BF%87%E5%AD%98%E5%82%A8%E6%B1%A0%E5%AE%B9%E9%87%8F%E5%AF%BC%E8%87%B4%E6%89%A9%E5%AE%B9%E5%A4%B1%E8%B4%A5/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pvc%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/pvc%E6%89%A9%E5%AE%B9%E7%9A%84%E7%9B%AE%E6%A0%87%E5%AE%B9%E9%87%8F%E8%B6%85%E8%BF%87%E5%AD%98%E5%82%A8%E6%B1%A0%E5%AE%B9%E9%87%8F%E5%AF%BC%E8%87%B4%E6%89%A9%E5%AE%B9%E5%A4%B1%E8%B4%A5/</guid>
      <description>现象描述 在低于1.23版本的Kubernetes环境中，对PVC进行扩容，当目标容量超过存储池容量时，扩容失败。&#xA;根因分析 Kubernetes社区已知问题，详情请参考处理扩充卷过程中的失败。&#xA;解决措施或规避方法 参考处理扩充卷过程中的失败。</description>
    </item>
    <item>
      <title>创建Pod失败，日志显示执行mount命令超时</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E5%A4%B1%E8%B4%A5-%E6%97%A5%E5%BF%97%E6%98%BE%E7%A4%BA%E6%89%A7%E8%A1%8Cmount%E5%91%BD%E4%BB%A4%E8%B6%85%E6%97%B6/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E5%A4%B1%E8%B4%A5-%E6%97%A5%E5%BF%97%E6%98%BE%E7%A4%BA%E6%89%A7%E8%A1%8Cmount%E5%91%BD%E4%BB%A4%E8%B6%85%E6%97%B6/</guid>
      <description>现象描述 创建Pod时，Pod一直处于ContainerCreating状态，此时查看huawei-csi-node的日志信息（详情请参考如何查看华为CSI日志），日志显示执行mount命令超时。&#xA;根因分析 原因1：该问题可能由于配置的业务IP网络不通，导致mount命令执行超时失败。&#xA;原因2：对于部分操作系统，如Kylin V10 SP1和SP2，使用NFSv3从容器内执行mount命令耗时较长，导致mount命令超时并报错“error: exit status 255”，该问题可能由于容器运行时containerd的LimitNOFILE参数值过大（10亿+）。&#xA;原因3：可能由于网络问题导致挂载失败，CSI默认挂载超时时间为30秒，超过30秒仍挂载失败，日志会显示执行mount命令超时。&#xA;解决措施或规避方法 执行ping命令判断业务IP网络是否连通，如果无法ping通，则为原因1，请配置可用的业务IP地址，如果可以ping通，则执行2。&#xA;进入任意可以执行mount命令的容器中，指定使用NFSv3执行mount命令。如果命令超时，则可能是原因2，继续执行systemctl status containerd.service命令查看配置文件路径，然后执行cat _/xxx/containerd.service_命令查看配置文件。文件中如果有LimitNOFILE=infinity或LimitNOFILE的值大小为10亿，请执行3。否则请联系华为工程师处理。&#xA;原因2可参考以下方式处理：&#xA;尝试使用NFSv4.0及以上协议。 参考社区修改方案，将LimitNOFILE参数值修改为合适的值。该方案将会重启容器运行时，请评估对业务的影响。 在挂载失败的宿主机手动挂载该文件系统，如果时间超过30秒，需要用户自行排查该宿主机到存储节点网络是否存在问题。mount命令示例如下&#xA;执行以下命令创建测试目录。&#xA;mkdir /tmp/test_mount 执行mount命令，挂载文件系统，并观察耗时，其中ip:nfs_share_path可以从huawei-csi-node日志中获取，详情请参考如何查看华为CSI日志&#xA;time mount ip:nfs_share_path /tmp/test_mount 测试结束，执行以下命令解挂载文件系统&#xA;umount /tmp/test_mount </description>
    </item>
    <item>
      <title>创建临时卷失败</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AF%B9%E6%8E%A5tanzu-kubernetes%E9%9B%86%E7%BE%A4%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E5%8D%B7%E5%A4%B1%E8%B4%A5/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/%E5%AF%B9%E6%8E%A5tanzu-kubernetes%E9%9B%86%E7%BE%A4%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E5%8D%B7%E5%A4%B1%E8%B4%A5/</guid>
      <description>现象描述 创建通用临时卷失败，报错PodSecurityPolicy: unable to admit pod: [spec.volumes[0]: Invalid value: &amp;ldquo;ephemeral&amp;rdquo;: ephemeral volumes are not allowed to be used spec.volumes[0]&#xA;根因分析 当前使用的PSP策略中没有使用“ephemeral”卷的权限。&#xA;解决措施或规避方法 在默认PSP &amp;ldquo;pks-privileged&amp;quot;和&amp;quot;pks-restricted&amp;quot;中增加使用“ephemeral”卷的权限，以修改&amp;quot;pks-privileged&amp;quot;举例：&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行命令， 修改pks-privileged的配置。&#xA;kubectl edit psp pks-privileged 在spec.volumes中增加“ephemeral”，示例如下：&#xA;# Please edit the object below. Lines beginning with a &amp;#39;#&amp;#39; will be ignored, # and an empty file will abort the edit. If an error occurs while saving this file will be # reopened with the relevant failures.</description>
    </item>
    <item>
      <title>从快照创建PVC</title>
      <link>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E4%BB%8E%E5%BF%AB%E7%85%A7%E5%88%9B%E5%BB%BApvc/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E4%BD%BF%E7%94%A8%E5%8D%8E%E4%B8%BAcsi/pvc%E7%AE%A1%E7%90%86/%E4%BB%8E%E5%BF%AB%E7%85%A7%E5%88%9B%E5%BB%BApvc/</guid>
      <description>本章节描述如何从快照创建PVC。&#xA;在创建这个PVC时，需要指定数据源。如下示例是一个简单的从快照创建PVC示例，在该示例中，使用快照“mysnapshot”作为数据源，新创建了一个名叫“myrestore”的PVC。&#xA;apiVersion: v1 kind: PersistentVolumeClaim metadata: name: myrestore spec: storageClassName: mysc dataSource: name: mysnapshot kind: VolumeSnapshot apiGroup: snapshot.storage.k8s.io volumeMode: Filesystem accessModes: - ReadWriteOnce resources: requests: storage: 100Gi 指定的storageClassName必须和dataSource中的快照源卷的StorageClass需一致。 克隆卷的容量必须不小于快照容量，建议和快照容量保持一致。 前提条件 系统中已经存在快照，且快照所在的backend存在支持克隆。支持快照创建PVC的存储请参考表 华为企业存储支持的特性及约束和表 华为分布式存储支持的特性及约束，支持快照创建PVC的Kubernetes版本请参考Kubernetes特性矩阵。&#xA;操作步骤 执行以下命令，基于从快照创建卷的配置文件创建PVC。&#xA;kubectl create -f myrestore.yaml </description>
    </item>
    <item>
      <title>更新huawei-csi-controller或huawei-csi-node服务</title>
      <link>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E6%9B%B4%E6%96%B0huawei-csi-controller%E6%88%96huawei-csi-node%E6%9C%8D%E5%8A%A1/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E6%9B%B4%E6%96%B0huawei-csi-controller%E6%88%96huawei-csi-node%E6%9C%8D%E5%8A%A1/</guid>
      <description>当您需要更新huawei-csi-controller或huawei-csi-node服务时，例如修改huawei-csi-controller服务的副本数时，执行此操作。&#xA;操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;进入/helm/esdk 目录，执行以下命令，获取原有服务配置文件。其中helm-huawei-csi为旧版本安装时指定的Helm Chart名称，huawei-csi为旧版本安装时指定的Helm Chart命名空间。组件包路径请参考表 软件包组件描述。&#xA;helm get values helm-huawei-csi -n huawei-csi -a &amp;gt; ./update-values.yaml 执行 vi update-values.yaml 命令打开2中获取的文件，参考Helm values.yaml参数说明修改配置项，修改完成后，按Esc，并输入 :wq!，保存修改。&#xA;执行以下命令更新华为CSI服务。&#xA;helm upgrade helm-huawei-csi ./ -n huawei-csi -f ./update-values.yaml </description>
    </item>
    <item>
      <title>华为分布式存储兼容性</title>
      <link>/docs/%E5%85%BC%E5%AE%B9%E6%80%A7%E5%92%8C%E7%89%B9%E6%80%A7/%E5%8D%8E%E4%B8%BA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E5%85%BC%E5%AE%B9%E6%80%A7/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%85%BC%E5%AE%B9%E6%80%A7%E5%92%8C%E7%89%B9%E6%80%A7/%E5%8D%8E%E4%B8%BA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E5%85%BC%E5%AE%B9%E6%80%A7/</guid>
      <description>华为CSI插件兼容华为OceanStor系列的分布式存储系统，具体支持的存储版本如下表所示：&#xA;表 1 支持的华为分布式存储&#xA;存储产品&#xA;版本&#xA;FusionStorage Block&#xA;8.0.1&#xA;OceanStor Pacific系列&#xA;8.1.0, 8.1.1, 8.1.2, 8.1.3, 8.1.5, 8.2.0&#xA;华为CSI插件针对华为分布式存储支持如下特性。&#xA;表 2 华为分布式存储支持的特性及约束&#xA;特性&#xA;FusionStorage Block&#xA;OceanStor Pacific系列&#xA;Static Provisioning&#xA;SAN：iSCSI/SCSI&#xA;SAN：iSCSI/SCSI&#xA;NAS：DPC2/NFS 3/4.13&#xA;Dynamic Provisioning&#xA;Manage Provisioning1&#xA;Expand Persistent Volume4&#xA;支持使用Dynamic Provisioning，Manage Provisioning方式创建的卷&#xA;Create VolumeSnapshot&#xA;支持使用Dynamic Provisioning，Manage Provisioning方式创建的SAN类型卷&#xA;Delete VolumeSnapshot&#xA;支持&#xA;仅支持SAN类型的卷快照&#xA;Restore VolumeSnapshot&#xA;支持&#xA;仅支持SAN类型的卷快照&#xA;Clone Persistent Volume&#xA;支持使用Dynamic Provisioning，Manage Provisioning方式创建的SAN类型卷&#xA;Raw Block Volume&#xA;仅支持SAN类型的卷&#xA;仅支持SAN类型的卷&#xA;Topology&#xA;支持&#xA;支持&#xA;Generic Ephemeral Inline Volumes</description>
    </item>
    <item>
      <title>检查卷快照依赖组件</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E6%A3%80%E6%9F%A5%E5%8D%B7%E5%BF%AB%E7%85%A7%E4%BE%9D%E8%B5%96%E7%BB%84%E4%BB%B6/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E6%A3%80%E6%9F%A5%E5%8D%B7%E5%BF%AB%E7%85%A7%E4%BE%9D%E8%B5%96%E7%BB%84%E4%BB%B6/</guid>
      <description>本章节介绍如何检查集群中卷快照依赖组件情况。&#xA;由于Kubernetes v1.17.0之前不支持快照功能，如果部署快照CRD可能导致集群出现问题，因此在低于Kubernetes v1.17.0版本上部署华为CSI，请务必按照Kubernetes低于v1.17.0章节检查。&#xA;Kubernetes低于v1.17.0 Kubernetes低于v1.17.0时，部署快照时将会导致集群出现问题，请按照以下步骤删除快照CRD安装文件。&#xA;执行以下命令查看Kubernetes版本。如下示例中，Kubernetes版本为v1.16.0。&#xA;kubectl get node 命令结果示例如下：&#xA;NAME STATUS ROLES AGE VERSION test-master Ready master 311d v1.16.0 test-node Ready &amp;lt;none&amp;gt; 311d v1.16.0 进入/helm/esdk/crds/snapshot-crds目录，执行以下命令，删除快照CRD安装文件。组件包路径请参考表 软件包组件描述。&#xA;rm -rf ./huawei-csi-snapshot-crd-v1.yaml </description>
    </item>
    <item>
      <title>删除存储后端</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF/</guid>
      <description> 正在执行卷管理操作期间，请勿删除存储后端。&#xA;删除后端示例 执行以下命令获取存储后端。&#xA;oceanctl get backend 命令结果示例如下：&#xA;NAMESPACE NAME PROTOCOL STORAGETYPE SN STATUS ONLINE URL huawei-csi backend-1 roce oceanstor-san xxxxxxxxxxxxxxxxxxxx Bound true https://192.168.129.157:8088 huawei-csi backend-2 roce oceanstor-san xxxxxxxxxxxxxxxxxxxx Bound true https://192.168.129.158:8088 执行以下命令删除指定存储后端。&#xA;oceanctl delete backend backend-1 执行以下命令检查删除结果。&#xA;oceanctl get backend backend-1 命令结果示例如下，如果回显为“not found”则删除成功。&#xA;Error from server (NotFound): backend &amp;#34;backend-1&amp;#34; not found </description>
    </item>
    <item>
      <title>删除存储后端证书</title>
      <link>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E6%96%B0%E5%A2%9E%E8%AF%81%E4%B9%A6%E5%88%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E5%8F%AF%E9%80%89/%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E8%AF%81%E4%B9%A6/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86/%E6%96%B0%E5%A2%9E%E8%AF%81%E4%B9%A6%E5%88%B0%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E5%8F%AF%E9%80%89/%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E5%90%8E%E7%AB%AF%E8%AF%81%E4%B9%A6/</guid>
      <description>删除证书步骤 执行以下命令获取存储后端。&#xA;oceanctl get backend 命令结果示例如下。&#xA;NAMESPACE NAME PROTOCOL STORAGETYPE SN STATUS ONLINE URL huawei-csi backend-1 roce oceanstor-san xxxxxxxxxxxxxxxxxxxx Bound true https://192.168.129.157:8088 huawei-csi backend-2 roce oceanstor-san xxxxxxxxxxxxxxxxxxxx Bound true https://192.168.129.158:8088 执行以下命令获取指定存储后端的证书。&#xA;oceanctl get cert -b backend-1 命令结果示例如下。&#xA;NAMESPACE NAME BOUNDBACKEND huawei-csi cert-1 backend-1 执行以下命令删除指定存储后端的证书。&#xA;oceanctl delete cert -b backend-1 检查删除结果。&#xA;oceanctl get cert -b backend-1 命令结果示例如下，如果回显为“no cert found”则删除成功。&#xA;Error from server (NotFound): no cert found on backend backend-1 in huawei-csi namespace </description>
    </item>
    <item>
      <title>通信矩阵</title>
      <link>/docs/%E9%99%84%E5%BD%95/%E9%80%9A%E4%BF%A1%E7%9F%A9%E9%98%B5/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%99%84%E5%BD%95/%E9%80%9A%E4%BF%A1%E7%9F%A9%E9%98%B5/</guid>
      <description>源设备&#xA;源IP&#xA;源端口&#xA;目的设备&#xA;目的IP&#xA;目的端口 （监听）&#xA;协议&#xA;端口说明&#xA;监听端口是否可更改&#xA;认证方式&#xA;加密方式&#xA;所属平面&#xA;特殊场景&#xA;CSI controller所在主机&#xA;源设备IP&#xA;1024~65536&#xA;存储设备&#xA;存储阵列管理IP&#xA;8088&#xA;TCP&#xA;用于卷创建/管理/删除等一系列动作&#xA;否&#xA;用户名/密码&#xA;TLS 1.3/TLS 1.2&#xA;OM&#xA;无&#xA;CSI controller所在主机&#xA;源设备IP&#xA;1024~65536&#xA;CSI controller所在主机&#xA;目的设备IP&#xA;9808&#xA;TCP&#xA;用于k8s对CSI controller的健康检查&#xA;否&#xA;证书认证&#xA;TLS 1.3/TLS 1.2&#xA;运维面&#xA;无&#xA;CSI node所在主机&#xA;源设备IP&#xA;1024~65536&#xA;CSI node所在主机&#xA;目的设备IP&#xA;9800&#xA;TCP&#xA;用于k8s对CSI node的健康检查&#xA;否&#xA;证书认证&#xA;TLS 1.3/TLS 1.2&#xA;运维面&#xA;无&#xA;k8s master节点&#xA;源设备IP</description>
    </item>
    <item>
      <title>创建Pod失败，日志显示执行mount命令失败</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E5%A4%B1%E8%B4%A5-%E6%97%A5%E5%BF%97%E6%98%BE%E7%A4%BA%E6%89%A7%E8%A1%8Cmount%E5%91%BD%E4%BB%A4%E5%A4%B1%E8%B4%A5/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E5%A4%B1%E8%B4%A5-%E6%97%A5%E5%BF%97%E6%98%BE%E7%A4%BA%E6%89%A7%E8%A1%8Cmount%E5%91%BD%E4%BB%A4%E5%A4%B1%E8%B4%A5/</guid>
      <description>现象描述 NAS场景下，创建Pod时，Pod一直处于ContainerCreating状态，此时查看huawei-csi-node的日志信息（详情请参考如何查看华为CSI日志），日志显示执行mount命令失败。&#xA;根因分析 该问题可能由于存储侧未开启NFS 4.0/4.1/4.2协议，主机在使用NFS v4协议挂载失败后，未进行协商使用NFS v3协议挂载。&#xA;解决措施或规避方法 开启存储侧的NFS 3/4.0/4.1/4.2协议，重新尝试默认挂载。 直接指定可用的NFS协议进行挂载，参考动态卷供应典型场景StorageClass配置示例。 </description>
    </item>
    <item>
      <title>检查主机多路径配置</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E6%A3%80%E6%9F%A5%E4%B8%BB%E6%9C%BA%E5%A4%9A%E8%B7%AF%E5%BE%84%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E6%A3%80%E6%9F%A5%E4%B8%BB%E6%9C%BA%E5%A4%9A%E8%B7%AF%E5%BE%84%E9%85%8D%E7%BD%AE/</guid>
      <description>当您计划在容器环境中使用FC/iSCSI/NVMe over RoCE/NVMe over FC协议对华为存储进行访问时，推荐您使用主机多路径软件增强主机和存储的链路冗余和性能。如果您不准备使用多路径软件，请跳过本章节。&#xA;华为CSI软件支持对接的操作系统和多路径软件请参考表 支持的主机操作系统及多路径软件版本。&#xA;如果您准备使用FC/iSCSI协议对接华为存储时，推荐使用操作系统自带的原生DM-Multipath。 如果您准备使用NVMe over RoCE/NVMe over FC协议对接华为存储时，推荐使用华为自研的UltraPath-NVMe。 如果您使用SCSI协议对接华为存储时，请关闭操作系统自带的DM-Multipath。 前提条件&#xA;主机多路径软件已经被正确的安装在主机上。&#xA;如果您使用的是操作系统自带的原生DM-Multipath，请咨询您的主机或操作系统提供商获取安装所需的资料和软件包。 如果您使用的是华为自研的UltraPath或者UltraPath-NVMe，请联系华为工程师获取UltraPath或者UltraPath-NVMe的资料和软件包。软件包版本请参考表 软件包组件描述。 操作步骤&#xA;如果您使用iSCSI/FC协议对接华为企业存储，请参考OceanStor Dorado &amp;amp; OceanStor在Red Hat下的主机连通性指南，对主机多路径进行配置和检查。&#xA;如果您使用NVMe over RoCE/NVMe over FC协议对接华为企业存储，请参考OceanStor Dorado &amp;amp; OceanStor在Red Hat下的主机连通性指南，对主机多路径进行配置和检查。&#xA;如果您使用iSCSI协议对接华为分布式存储，请参考 《FusionStorage 8.0.1 块存储基础业务配置指南》中的“应用服务器配置多路径”章节，对主机多路径进行配置和检查。&#xA;如果您使用了操作系统原生多路径时，需要检查/etc/multipath.conf文件，检查文件是否存在如下配置：&#xA;defaults { user_friendly_names yes find_multipaths no } 如果配置不存在，请在/etc/multipath.conf文件开始处增加该配置项。&#xA;user_friendly_names 和find_multipaths 的参数作用请参考：dm_multipath/config_file_defaults</description>
    </item>
    <item>
      <title>配置自定义权限</title>
      <link>/docs/%E9%99%84%E5%BD%95/%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9D%83%E9%99%90/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%99%84%E5%BD%95/%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9D%83%E9%99%90/</guid>
      <description>自定义角色配置 针对不同的存储资源，请参考以下配置：&#xA;NAS相关资源请参考表 NAS相关资源最小权限说明配置最小权限。 SAN相关资源请参考表 SAN相关资源最小权限说明配置最小权限。 可参考存储文档：《OceanStor Dorado 6000, Dorado 18000系列 产品文档》配置自定义角色权限。&#xA;表 1 NAS相关资源最小权限说明&#xA;权限对象&#xA;父级对象&#xA;读写权限&#xA;功能说明&#xA;workload_type&#xA;file_storage_service&#xA;只读&#xA;查询应用类型&#xA;file_system&#xA;file_storage_service&#xA;读写&#xA;管理文件系统&#xA;fs_snapshot&#xA;file_storage_service&#xA;读写&#xA;管理文件系统快照&#xA;quota&#xA;file_storage_service&#xA;读写&#xA;管理文件系统配额&#xA;nfs_service&#xA;file_storage_service&#xA;只读&#xA;查询NFS服务&#xA;share&#xA;file_storage_service&#xA;读写&#xA;管理NFS共享&#xA;dtree&#xA;file_storage_service&#xA;读写&#xA;管理dtree&#xA;hyper_metro_pair&#xA;hyper_metro&#xA;读写&#xA;创建文件系统双活Pair&#xA;hyper_metro_domain&#xA;hyper_metro&#xA;只读&#xA;查询文件系统双活域信息&#xA;remote_device&#xA;local_data_protection&#xA;只读&#xA;查询远端设备信息&#xA;storage_pool&#xA;pool&#xA;只读&#xA;查询存储池信息&#xA;smart_qos&#xA;resource_performance_tuning&#xA;读写&#xA;管理SmartQoS策略&#xA;system&#xA;system&#xA;只读</description>
    </item>
    <item>
      <title>修改日志输出模式</title>
      <link>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E4%BF%AE%E6%94%B9%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA%E6%A8%A1%E5%BC%8F/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E4%BF%AE%E6%94%B9%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA%E6%A8%A1%E5%BC%8F/</guid>
      <description>huawei-csi支持两种日志输出模式，分别是file和console。file指的是输出到固定的日志目录（例如：/var/log/huawei）；console指的是输出到容器标准目录。用户可以根据自身需求自行设置日志输出模式，默认为file.&#xA;操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;进入/helm/esdk 目录，执行以下命令，获取原有服务配置文件。其中helm-huawei-csi为旧版本安装时指定的Helm Chart名称，huawei-csi为旧版本安装时指定的Helm Chart命名空间。组件包路径请参考表 软件包组件描述。&#xA;helm get values helm-huawei-csi -n huawei-csi -a &amp;gt; ./update-values.yaml 执行vi update-values.yaml命令打开2中获取的文件，修改配置项，修改完成后，按Esc，并输入 :wq!，保存修改。&#xA;# The CSI driver parameter configuration csiDriver: # Driver name, it is strongly recommended not to modify this parameter # The CCE platform needs to modify this parameter, e.g. csi.oceanstor.com driverName: csi.huawei.com # Endpoint, it is strongly recommended not to modify this parameter endpoint: /csi/csi.sock # DR Endpoint, it is strongly recommended not to modify this parameter drEndpoint: /csi/dr-csi.</description>
    </item>
    <item>
      <title>创建Pod失败，Events日志显示“publishInfo doesn&#39;t exist”</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E5%A4%B1%E8%B4%A5-events%E6%97%A5%E5%BF%97%E6%98%BE%E7%A4%BA-publishinfo-doesn-t-exist/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E5%A4%B1%E8%B4%A5-events%E6%97%A5%E5%BF%97%E6%98%BE%E7%A4%BA-publishinfo-doesn-t-exist/</guid>
      <description>现象描述 创建Pod时，Pod一直处于ContainerCreating状态，查看Pod中有打印告警事件：rpc error: code = Internal desc = publishInfo doesn&amp;rsquo;t exist。&#xA;根因分析 按照CSI协议约定，工作负载要使用一个PV卷时，CO（Container Orchestration system，通过RPC请求与CSI插件通信）会调用CSI插件提供的CSI协议中的“ControllerPublishVolume”接口（huawei-csi-controller服务提供）完成PV卷的映射，然后调用CSI插件提供的“NodeStageVolume”接口（huawei-csi-node服务提供）完成PV卷的挂载。导致出现“publishInfo doesn&amp;rsquo;t exist”错误的原因是在一次完整的挂载时，仅huawei-csi-node服务收到了“NodeStageVolume”请求，而在此之前huawei-csi-controller服务未收到“ControllerPublishVolume”请求，导致huawei-csi-controller服务未完成PV卷的映射，没有把映射信息传递给huawei-csi-node服务。&#xA;解决措施 解决该问题，需要触发Kubernetes调用“ControllerPublishVolume”接口。&#xA;如果集群中所有旧版本创建的工作负载均触发了该操作，则后续将不会出现该问题。&#xA;操作步骤 使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，获取工作负载所在节点信息。&#xA;kubectl get pod error-pod -n error-pod-in-namespace -owide 命令结果示例如下。&#xA;NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES pod-nfs 0/1 ContainerCreating 0 3s &amp;lt;none&amp;gt; node-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt; 将该工作负载漂移至其他节点。&#xA;若在集群内无法完成漂移，可在原节点完成工作负载重建，即进行删除-新建操作。&#xA;观察该工作负载是否成功拉起，如果拉起失败请联系华为工程师。&#xA;集群工作负载排查 Kubernetes调用CSI插件完成卷映射时，将使用VolumeAttachment资源保存映射信息，用于表示将指定的卷从指定的节点上附加或分离。由于该问题是由于publishInfo不存在导致，因此可通过查看VolumeAttachment资源信息排查集群中其他工作负载是否存在该问题。具体步骤如下：&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行以下命令，获取VolumeAttachment信息，并保留ATTACHER字段为csi.huawei.com的资源，其中csi.huawei.com为华为CSI驱动名称，可在values.yaml文件中配置，配置项为csiDriver.driverName，配置项详情描述参考表 csiDriver配置项说明。&#xA;kubectl get volumeattachments.storage.k8s.io 命令结果示例如下。&#xA;NAME ATTACHER PV NODE ATTACHED AGE csi-47abxx csi.</description>
    </item>
    <item>
      <title>华为CSI资源管理</title>
      <link>/docs/%E9%99%84%E5%BD%95/%E5%8D%8E%E4%B8%BAcsi%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E9%99%84%E5%BD%95/%E5%8D%8E%E4%B8%BAcsi%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/</guid>
      <description>本章节列举了华为CSI插件中每个容器所使用的资源请求和限制。其中单位说明请参考Kubernetes 中的资源单位。&#xA;表 1 容器资源请求和限制&#xA;Pod 名称&#xA;容器名称&#xA;CPU 请求&#xA;CPU 限制&#xA;Memory 请求&#xA;Memory 限制&#xA;huawei-csi-controller&#xA;huawei-csi-driver&#xA;50m&#xA;500m&#xA;128Mi&#xA;1Gi&#xA;storage-backend-sidecar&#xA;50m&#xA;300m&#xA;128Mi&#xA;512Mi&#xA;storage-backend-controller&#xA;50m&#xA;300m&#xA;128Mi&#xA;512Mi&#xA;huawei-csi-extender&#xA;50m&#xA;300m&#xA;128Mi&#xA;512Mi&#xA;csi-attacher&#xA;50m&#xA;300m&#xA;128Mi&#xA;512Mi&#xA;csi-provisioner&#xA;50m&#xA;300m&#xA;128Mi&#xA;512Mi&#xA;csi-resize&#xA;50m&#xA;300m&#xA;128Mi&#xA;512Mi&#xA;csi-snapshotter&#xA;50m&#xA;300m&#xA;128Mi&#xA;512Mi&#xA;snapshot-controller&#xA;50m&#xA;300m&#xA;128Mi&#xA;512Mi&#xA;liveness-probe&#xA;10m&#xA;100m&#xA;128Mi&#xA;128Mi&#xA;huawei-csi-node&#xA;huawei-csi-driver&#xA;50m</description>
    </item>
    <item>
      <title>检查主机依赖软件状态</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E6%A3%80%E6%9F%A5%E4%B8%BB%E6%9C%BA%E4%BE%9D%E8%B5%96%E8%BD%AF%E4%BB%B6%E7%8A%B6%E6%80%81/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E6%A3%80%E6%9F%A5%E4%B8%BB%E6%9C%BA%E4%BE%9D%E8%B5%96%E8%BD%AF%E4%BB%B6%E7%8A%B6%E6%80%81/</guid>
      <description>本章节介绍如何检查集群中工作节点上主机依赖软件状态是否正常。本例中主机操作系统为CentOS 7.9 x86_64。&#xA;检查iSCSI客户端状态。&#xA;systemctl status iscsi iscsid 检查NFS客户端状态。&#xA;systemctl status rpcbind 检查DM-Multipath多路径软件状态。&#xA;systemctl status multipathd.socket multipathd 检查UltraPath多路径软件状态。&#xA;systemctl status nxup 检查UltraPath-NVMe多路径软件状态。&#xA;systemctl status upudev upService_plus </description>
    </item>
    <item>
      <title>开启ReadWriteOncePod功能门</title>
      <link>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E5%BC%80%E5%90%AFreadwriteoncepod%E5%8A%9F%E8%83%BD%E9%97%A8/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E5%BC%80%E5%90%AFreadwriteoncepod%E5%8A%9F%E8%83%BD%E9%97%A8/</guid>
      <description>ReadWriteOnce访问模式是Kubernetes v1.22版本为PV和PVC引入的第四种访问模式。如果您使用ReadWriteOncePod访问模式的PVC创建一个Pod，Kubernetes会确保该Pod是整个集群中唯一可以读取或写入该PVC的Pod。&#xA;由于ReadWriteOncePod访问模式在当前已发布的Kubernetes v1.22/1.23/1.24版本中是alpha特性，需要先在kube-apiserver、kube-scheduler和kubelet的feature-gates中开启ReadWriteOncePod特性才能使用。&#xA;CCE / CCE Agile平台暂时不支持开启ReadWriteOncePod功能门&#xA;操作步骤 为kube-apiserver启用ReadWriteOncePod功能门。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行vi /etc/kubernetes/manifests/kube-apiserver.yaml命令，按I或Insert进入编辑状态，为 kube-apiserver容器添加参数&amp;ndash;feature-gates=ReadWriteOncePod=true。修改完成后，按Esc，并输入 :wq!，保存修改。&#xA;... spec: containers: - command: - kube-apiserver - --feature-gates=ReadWriteOncePod=true ... 在编辑完成后，Kubernetes会自动应用更新，不需要手动更新。&#xA;为kube-scheduler启用ReadWriteOncePod功能门。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意master节点。&#xA;执行vi /etc/kubernetes/manifests/kube-scheduler.yaml命令，按I或Insert进入编辑状态，为kube-scheduler容器添加参数&amp;ndash;feature-gates=ReadWriteOncePod=true。修改完成后，按Esc，并输入 :wq!，保存修改。&#xA;… spec: containers: - command: - kube-scheduler - --feature-gates=ReadWriteOncePod=true ... 在编辑完成后，Kubernetes会自动应用更新，不需要手动更新。&#xA;为kubelet启用ReadWriteOncePod功能门。&#xA;由于动态Kubelet配置功能在v1.22中已弃用，并且在v1.24中删除，因此集群中每个worker节点上的kubelet都需要执行以下操作。&#xA;使用远程访问工具（以PuTTY为例），通过管理IP地址，登录Kubernetes集群的任意worker节点。&#xA;执行vi /var/lib/kubelet/config.yaml命令，按I或Insert进入编辑状态，为KubeletConfiguration对象的featureGates字段添加ReadWriteOncePod: true，如果没有featureGates字段请一并添加。修改完成后，按Esc，并输入 :wq!，保存修改。&#xA;apiVersion: kubelet.config.k8s.io/v1beta1 featureGates: ReadWriteOncePod: true ... kubelet配置文件的默认路径为/var/lib/kubelet/config.yaml，请根据实际情况填写。&#xA;在配置完成后，执行systemctl restart kubelet命令重启kubelet。</description>
    </item>
    <item>
      <title>创建Pod失败或重启kubelet后，日志显示挂载点已存在</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E5%A4%B1%E8%B4%A5%E6%88%96%E9%87%8D%E5%90%AFkubelet%E5%90%8E-%E6%97%A5%E5%BF%97%E6%98%BE%E7%A4%BA%E6%8C%82%E8%BD%BD%E7%82%B9%E5%B7%B2%E5%AD%98%E5%9C%A8/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/%E5%88%9B%E5%BB%BApod%E5%A4%B1%E8%B4%A5%E6%88%96%E9%87%8D%E5%90%AFkubelet%E5%90%8E-%E6%97%A5%E5%BF%97%E6%98%BE%E7%A4%BA%E6%8C%82%E8%BD%BD%E7%82%B9%E5%B7%B2%E5%AD%98%E5%9C%A8/</guid>
      <description>现象描述 创建Pod时，Pod一直处于ContainerCreating状态，或者重启kubelet后，日志中显示挂载点已存在。此时查看huawei-csi-node的日志信息（详情请参考如何查看华为CSI日志），日志提示错误为：The mount /var/lib/kubelet/pods/xxx/mount is already exist, but the source path is not /var/lib/kubelet/plugins/kubernetes.io/xxx/globalmount&#xA;根因分析 该问题的根因是Kubernetes进行重复挂载操作。&#xA;解决措施或规避方法 执行以下命令，将已存在的路径解除挂载，其中“/var/lib/kubelet/pods/xxx/mount”为日志中提示的已存在的挂载路径。&#xA;umount /var/lib/kubelet/pods/xxx/mount </description>
    </item>
    <item>
      <title>检查CSI依赖的镜像</title>
      <link>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E6%A3%80%E6%9F%A5csi%E4%BE%9D%E8%B5%96%E7%9A%84%E9%95%9C%E5%83%8F/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87/%E6%A3%80%E6%9F%A5csi%E4%BE%9D%E8%B5%96%E7%9A%84%E9%95%9C%E5%83%8F/</guid>
      <description>华为CSI安装过程中需要依赖下表中的镜像，若集群中的所有worker节点已连接互联网且能够在线拉取镜像，则可跳过本章节。若集群中的节点无法连接互联网，则请根据使用的Kubernetes版本，下载对应的镜像文件并上传到镜像仓库中或者导入Kubernetes集群的所有worker节点中。&#xA;huawei-csi-controller服务依赖的sidecar镜像：livenessprobe、csi-provisioner、csi-attacher、csi-resizer、csi-snapshotter、snapshot-controller、storage-backend-controller、storage-backend-sidecar、huawei-csi-driver和huawei-csi-extender。huawei-csi-node服务依赖的sidecar镜像：livenessprobe、csi-node-driver-registrar和huawei-csi-driver。&#xA;关于每个镜像的功能和详情，请参考下表。&#xA;表 1 Huawei CSI依赖的镜像&#xA;容器名称&#xA;容器镜像&#xA;K8s版本要求&#xA;功能描述&#xA;livenessprobe&#xA;k8s.gcr.io/sig-storage/livenessprobe:v2.5.0&#xA;v1.16+&#xA;Kubernetes社区提供，提供用于监控CSI的健康状态，并上报给Kubernetes，使Kubernetes能够自动检测CSI程序的问题并重启Pod尝试修改该问题。&#xA;csi-resizer&#xA;k8s.gcr.io/sig-storage/csi-resizer:v1.4.0&#xA;v1.16+&#xA;Kubernetes社区提供，在扩容PVC时，调用CSI给PVC提供更多的存储容量空间。&#xA;csi-node-driver-registrar&#xA;k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.3.0&#xA;v1.16+&#xA;Kubernetes社区提供，用于获取CSI信息，并通过kubelet的插件注册机制将节点注册到kubelet中，从而Kubernetes能够感知该节点与华为存储的对接。&#xA;csi-snapshotter&#xA;k8s.gcr.io/sig-storage/csi-snapshotter:v4.2.1&#xA;v1.17+&#xA;Kubernetes社区提供，在创建/删除VolumeSnapshot时，调用CSI在存储侧完成快照的创建和删除。&#xA;snapshot-controller&#xA;k8s.gcr.io/sig-storage/snapshot-controller:v4.2.1&#xA;v1.17+&#xA;Kubernetes社区提供，在创建/删除VolumeSnapshot时，监听Kubernetes API中关于VolumeSnapshot和VolumeSnapshotContent的对象，并触发csi-snapshotter在存储上完成快照的创建。&#xA;csi-provisioner&#xA;k8s.gcr.io/sig-storage/csi-provisioner:v3.0.0&#xA;v1.17+&#xA;Kubernetes社区提供，用于完成PVC创建/删除。&#xA;在创建PVC时，调用huawei-csi-controller服务在存储上创建LUN/文件系统作为PV。在删除PVC时，调用huawei-csi-controller服务在存储上删除该PV对应的LUN/文件系统。 quay.io/k8scsi/csi-provisioner:v1.4.0&#xA;v1.16.x&#xA;csi-attacher&#xA;k8s.gcr.io/sig-storage/csi-attacher:v3.4.0&#xA;v1.17+&#xA;在创建/删除Pod时，调用huawei-csi-controller服务执行Publish/Unpublish Volume操作。&#xA;quay.io/k8scsi/csi-attacher:v1.2.1&#xA;v.1.16.x&#xA;storage-backend-controller&#xA;storage-backend-controller:4.5.0&#xA;v1.16+&#xA;华为CSI软件包提供、用于管理storageBackendClaim资源。&#xA;storage-backend-sidecar&#xA;storage-backend-sidecar:4.5.0&#xA;v1.16+&#xA;华为CSI软件包提供、用于管理storageBackendContent资源。&#xA;huawei-csi-driver&#xA;huawei-csi:4.5.0&#xA;v1.16+&#xA;华为CSI软件包提供、用于提供华为CSI支持的所有特性。&#xA;huawei-csi-extender&#xA;huawei-csi-extender:4.5.0&#xA;v1.16+&#xA;华为CSI软件包提供、用于提供华为CSI的扩展特性。&#xA;集群若未连接互联网，需要手动下载容器镜像并上传到集群中，具体操作请参考下载容器镜像。</description>
    </item>
    <item>
      <title>配置非root用户访问Kubernetes集群</title>
      <link>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E9%85%8D%E7%BD%AE%E9%9D%9Eroot%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AEkubernetes%E9%9B%86%E7%BE%A4/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/%E9%85%8D%E7%BD%AE%E9%9D%9Eroot%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AEkubernetes%E9%9B%86%E7%BE%A4/</guid>
      <description>操作步骤 拷贝Kubernetes集群的认证文件，/etc/kubernetes/admin.conf修改为实际使用的认证文件。&#xA;mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config 修改认证文件的用户与用户组。&#xA;sudo chown $(id -u):$(id -g) $HOME/.kube/config 配置当前用户的KUBECONFIG环境变量，以Ubuntu 20.04举例如下。&#xA;echo &amp;#34;export KUBECONFIG=$HOME/.kube/config&amp;#34; &amp;gt;&amp;gt; ~/.bashrc source ~/.bashrc </description>
    </item>
    <item>
      <title>Pod挂载卷目录提示I/O error</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/pod%E6%8C%82%E8%BD%BD%E5%8D%B7%E7%9B%AE%E5%BD%95%E6%8F%90%E7%A4%BAi-o-error/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/pod%E6%8C%82%E8%BD%BD%E5%8D%B7%E7%9B%AE%E5%BD%95%E6%8F%90%E7%A4%BAi-o-error/</guid>
      <description>现象描述 Pod对所挂载卷进行读写时，提示I/O error。&#xA;根因分析 使用SCSI等协议时，如果Pod持续往挂载目录写入数据时，存储发生重启，导致主机上设备到存储的链路中断，触发I/O error。存储恢复时，挂载目录仍然为只读。&#xA;解决措施 重新挂载该卷，即通过重建Pod可以触发重新挂载。</description>
    </item>
    <item>
      <title>Kubernetes平台第一次搭建时， iscsi tcp服务没有正常启动，导致创建Pod失败</title>
      <link>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/kubernetes%E5%B9%B3%E5%8F%B0%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BA%E6%97%B6-iscsi_tcp%E6%9C%8D%E5%8A%A1%E6%B2%A1%E6%9C%89%E6%AD%A3%E5%B8%B8%E5%90%AF%E5%8A%A8-%E5%AF%BC%E8%87%B4%E5%88%9B%E5%BB%BApod%E5%A4%B1%E8%B4%A5/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/docs/%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/pod%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/kubernetes%E5%B9%B3%E5%8F%B0%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BA%E6%97%B6-iscsi_tcp%E6%9C%8D%E5%8A%A1%E6%B2%A1%E6%9C%89%E6%AD%A3%E5%B8%B8%E5%90%AF%E5%8A%A8-%E5%AF%BC%E8%87%B4%E5%88%9B%E5%BB%BApod%E5%A4%B1%E8%B4%A5/</guid>
      <description>现象描述 创建Pod时报错，在/var/log/huawei-csi-node日志中报错“ Cannot connect ISCSI portal *.*.*.*: libkmod: kmod_module_insert_module: could not find module by name=&amp;lsquo;iscsi_tcp&amp;rsquo;。&#xA;根因分析 搭建Kubernete和安装iSCSI服务后， iscsi_tcp服务可能会被停掉，可通过执行以下命令查看服务是否被停掉。&#xA;lsmod | grep iscsi | grep iscsi_tcp 命令结果示例如下。&#xA;iscsi_tcp 18333 6 libiscsi_tcp 25146 1 iscsi_tcp libiscsi 57233 2 libiscsi_tcp,iscsi_tcp scsi_transport_iscsi 99909 3 iscsi_tcp,libiscsi 解决措施或规避方法 执行以下命令，手动加载iscsi_tcp服务。&#xA;modprobe iscsi_tcp lsmod | grep iscsi | grep iscsi_tcp </description>
    </item>
    <item>
      <title>搜索结果</title>
      <link>/search/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/search/</guid>
      <description></description>
    </item>
  </channel>
</rss>
